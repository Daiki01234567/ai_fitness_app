# 画面遷移図 + ワイヤーフレーム（UI設計）v3.1

**プロジェクト名**: AIフィットネスアプリ（仮称）
**バージョン**: 3.1 (MVP)
**作成日**: 2025年11月
**最終更新日**: 2025年11月22日
**対象期間**: Phase 1-2 (0-4ヶ月)

---

## 📋 v3.1での主な変更点

### 要件定義書v3.1・利用規約v3.1・プライバシーポリシーv3.1との整合性確保

✅ **用語の統一**:
- 「フォーム確認補助機能」「参考情報」「参考スコア」等の表現を完全統一
- 医療機器でない旨の表示を強化
- ユーザーへの適切な情報提供方法の明確化

✅ **法的要件の反映**:
- 利用規約v3.1第3.3条: 医療機器でない旨の明示表示
- 利用規約v3.1第3.4条: 参考情報としての位置づけの明示
- プライバシーポリシーv3.1第2.3条: オンデバイス処理の明示
- プライバシーポリシーv3.1第8条: セキュリティ対策の表示

✅ **ユーザー体験の向上**:
- 初回起動時の利用規約・プライバシーポリシー同意フローの改善
- サービスの性質と制限事項の明確な説明
- 免責事項の適切な表示タイミング

✅ **プライバシー保護の強化**:
- カメラ映像のオンデバイス処理の明示
- データ取扱いの透明性向上
- ユーザー権利行使方法の明示

---

## 目次

### Part 1: 画面一覧と全体遷移図
1. [画面一覧](#1-画面一覧)
2. [画面遷移図（全体）](#2-画面遷移図全体)

### Part 2: 認証・オンボーディング画面
3. [各画面の詳細設計](#3-各画面の詳細設計)
   - 3.1 スプラッシュ画面
   - 3.2 オンボーディング画面
   - 3.3 ログイン画面
   - 3.4 新規登録画面
   - 3.5 利用規約同意画面
   - 3.6 ホーム画面
   - 3.7 メニュー選択画面

### Part 3: トレーニング・履歴・アカウント画面
   - 3.8 カメラ設定画面
   - 3.9 トレーニング実行画面
   - 3.10 セッション結果画面
   - 3.11 履歴画面
   - 3.12 プロフィール画面
   - 3.13 設定画面
   - 3.14 課金画面
   - 3.15 サブスクリプション管理画面

### Part 4: UI/UXガイドライン
4. [UI/UXガイドライン](#4-uiuxガイドライン)
5. [レスポンシブ対応](#5-レスポンシブ対応)
6. [変更履歴](#6-変更履歴)

---

## 1. 画面一覧

### 1.1 全画面リスト

| No | 画面名 | カテゴリ | 認証 | v3.1変更点 | 備考 |
|----|--------|---------|------|-----------|------|
| 1 | スプラッシュ画面 | 起動 | 不要 | - | アプリ起動時の最初の画面 |
| 2 | オンボーディング画面 | 起動 | 不要 | 法的要件の説明追加 | 初回のみ表示（3画面） |
| 3 | ログイン画面 | 認証 | 不要 | - | メール/電話 |
| 4 | 新規登録画面 | 認証 | 不要 | - | 個人情報入力 |
| 5 | 利用規約同意画面 | 認証 | 不要 | v3.1準拠の全文表示 | 新規登録時・未同意時 |
| 6 | ホーム画面 | メイン | 必要 | 免責事項の表示方法改善 | ダッシュボード |
| 7 | メニュー選択画面 | トレーニング | 必要 | - | 5種目の選択・検索 |
| 8 | カメラ設定画面 | トレーニング | 必要 | プライバシー説明追加 | 向き・距離ガイド |
| 9 | トレーニング実行画面 | トレーニング | 必要 | 参考情報の明示強化 | リアルタイムフィードバック |
| 10 | セッション結果画面 | トレーニング | 必要 | 参考スコアの説明追加 | 今回の成績 |
| 11 | 履歴画面 | 記録 | 必要 | - | グラフ・一覧 |
| 12 | プロフィール画面 | アカウント | 必要 | データ管理機能追加 | 個人情報表示・編集 |
| 13 | 設定画面 | アカウント | 必要 | プライバシー設定強化 | 各種設定 |
| 14 | 課金画面 | 課金 | 必要 | - | サブスク購入 |
| 15 | サブスクリプション管理画面 | 課金 | 必要 | - | 課金状態確認 |

---

## 2. 画面遷移図（全体）

```
┌──────────────────────────────────────────────────────────┐
│                         起動フロー                             │
└──────────────────────────────────────────────────────────┘

[アプリ起動]
    ↓
┌───────────────
│スプラッシュ   │ (1-2秒表示)
│画面          │
└──────┬────────
       │
       ├→ 初回起動?
       │    YES ↓
       │   ┌───────────────
       │   │オンボーディング│ (3画面、スキップ可)
       │   │画面 (1/3)     │ ※v3.1: 法的要件の説明追加
       │   └──────┬────────
       │          ↓
       │   ┌───────────────
       │   │オンボーディング│
       │   │画面 (2/3)     │ ※v3.1: サービスの性質説明
       │   └──────┬────────
       │          ↓
       │   ┌───────────────
       │   │オンボーディング│
       │   │画面 (3/3)     │ ※v3.1: プライバシー保護の説明
       │   └──────┬────────
       │          │
       └→ NO    │
                 ↓
       ┌─────────────────
       │ログイン済み?   │
       └────┬───────┬────
            │       │
          YES      NO
            │       ↓
            │  ┌───────────────
            │  │ログイン画面   │
            │  └──────┬────────
            │         │
            │         ├→ 新規登録ボタン
            │         │       ↓
            │         │  ┌───────────────
            │         │  │新規登録画面   │
            │         │  └──────┬────────
            │         │         │
            │         │         ↓
            │         │  ┌───────────────
            │         │  │利用規約       │← 未同意の場合のみ
            │         │  │同意画面       │  ※v3.1全文表示
            │         │  └──────┬────────
            │         │         │
            └─────────┴─────────┘
                     ↓
┌──────────────────────────────────────────────────────────┐
│                      メインフロー                              │
└──────────────────────────────────────────────────────────┘

              ┌───────────────
              │ホーム画面     │
              │(ダッシュボード)│ ※v3.1: 免責事項表示改善
              └──────┬────────
                     │
        ┌────────────┼────────────┐
        │            │            │
        ↓            ↓            ↓
┌──────────  ┌──────────  ┌──────────  ┌──────────
│トレーニング│  │履歴画面   │  │アカウント │  │設定画面   │
│開始       │  │          │  │(プロフィール)│  │         │
└────┬─────  └──────────  └──────────  └──────────
     │
     ↓
┌───────────────
│メニュー選択   │
│画面          │
│(検索・フィルタ)│
└──────┬────────
       │
       ↓
┌───────────────
│課金状態チェック│
└───┬───────┬───
    │      │
   OK   無料枠 /期限切れ
    │      ↓
    │  ┌───────────
    │  │課金画面   │
    │  └───────────
    │
    ↓
┌───────────────
│カメラ設定     │
│画面          │ ※v3.1: プライバシー説明追加
│(向き・距離)   │
└──────┬────────
       │
       ↓
┌───────────────
│トレーニング   │
│実行画面       │ ※v3.1: 参考情報の明示強化
│(リアルタイム) │
└──────┬────────
       │
       ↓
┌───────────────
│セッション結果 │
│画面          │ ※v3.1: 参考スコアの説明追加
└──────┬────────
       │
       ├→ 「もう1セット」→ メニュー選択へ
       │
       └→ 「完了」→ 自動保存 → ホーム画面へ
```

---

## 3. 各画面の詳細設計

---

## 3.1 スプラッシュ画面

### 目的
- アプリ起動中のローディング表示
- ブランドの印象付け

### レイアウト

```
┌─────────────────────────────
│                             │
│                             │
│         [アプリロゴ]          │
│                             │
│      [アプリ名（仮称）]       │
│                             │
│                             │
│     ··· (ローディング)      │
│                             │
│                             │
└─────────────────────────────
```

### 要素

| 要素 | 内容 | 位置 |
|-----|------|------|
| **ロゴ** | アイコン画像（準備済み） | 画面中央 |
| **アプリ名** | テキスト（未定） | ロゴの下 |
| **ローディング** | アニメーション（点滅・回転） | 画面下部 |
| **背景色** | 緑（ブランドカラー） | 全体 |

### 表示時間
- 1-2秒（初期化処理完了まで）

### 遷移条件
- 初回起動 → オンボーディング画面
- 2回目以降・ログイン済み → ホーム画面
- 2回目以降・未ログイン → ログイン画面

### v3.1での変更点
- 変更なし

---

## 3.2 オンボーディング画面

### 目的
- アプリの基本機能説明
- サービスの性質と制限事項の説明（v3.1追加）
- プライバシー保護の説明（v3.1追加）

### 画面1/3: 基本機能説明

```
┌─────────────────────────────
│                             │
│      [イラスト画像1]         │
│                             │
│  AIでフォーム確認を補助      │
│                             │
│  スマホのカメラで撮影        │
│  AIが参考情報を提供          │
│  あなたの成長を記録          │
│                             │
│  ● ○ ○              [次へ]│
│            [スキップ]        │
└─────────────────────────────
```

### 画面2/3: サービスの性質説明（v3.1強化）

```
┌─────────────────────────────
│                             │
│      [イラスト画像2]         │
│                             │
│  参考情報としてご利用ください │
│                             │
│  ✓ トレーニングフォームの    │
│    確認を補助する参考情報    │
│                             │
│  ⚠ 医療機器ではありません    │
│  ⚠ 診断・治療を目的と        │
│    するものではありません    │
│                             │
│  最終的な判断は             │
│  ご自身で行ってください       │
│                             │
│  ○ ● ○              [次へ]│
│            [スキップ]        │
└─────────────────────────────
```

### 画面3/3: プライバシー保護の説明（v3.1強化）

```
┌─────────────────────────────
│                             │
│      [イラスト画像3]         │
│                             │
│  プライバシーを守ります       │
│                             │
│  🔒 カメラ映像は端末内のみで │
│     処理され、外部に送信     │
│     されません              │
│                             │
│  🔒 骨格の位置データ(座標)のみ│
│     を記録・送信します        │
│                             │
│  🔒 あなたの個人情報は        │
│     厳重に保護されます        │
│                             │
│  ○ ○ ●            [始める]│
│            [スキップ]        │
└─────────────────────────────
```

### インタラクション
- **横スワイプ**: 次の画面へ
- **スキップボタン**: ログイン画面へ直接遷移
- **次へ/始めるボタン**: 次の画面へ（3画面目でログイン画面へ）

### 表示条件
- 初回起動時のみ
- 「スキップ」選択後は再表示しない

### v3.1での変更点
- 画面2/3: サービスの性質と医療機器でない旨を明示（利用規約v3.1第3.3条準拠）
- 画面3/3: プライバシー保護の具体的な説明を追加（プライバシーポリシーv3.1第2.3条準拠）
- 免責事項の適切な表示タイミングの確保

---

## 3.3 ログイン画面

### 目的
- 既存ユーザーの認証

### レイアウト

```
┌─────────────────────────────
│ [← 戻る]   ログイン          │
│                             │
│                             │
│  [アプリロゴ]                │
│                             │
│  ┌─────────────────────┐  │
│  │メールアドレス または      │  │
│  │電話番号                  │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │パスワード                │  │
│  └─────────────────────┘  │
│                             │
│  □ ログイン状態を保持       │
│                             │
│  ┌─────────────────────┐  │
│  │    ログイン             │  │
│  └─────────────────────┘  │
│                             │
│  パスワードを忘れた方         │
│                             │
│  ───── または ─────        │
│                             │
│  ┌─────────────────────┐  │
│  │ 🍎 Appleでログイン      │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ 📧 Googleでログイン     │  │
│  └─────────────────────┘  │
│                             │
│  アカウントをお持ちでない方    │
│  新規登録はこちら            │
│                             │
└─────────────────────────────
```

### 入力項目

| 項目 | 必須 | 形式 | バリデーション |
|-----|------|------|---------------|
| **メールアドレス/電話番号** | ○ | テキスト | メール形式 or 電話番号形式 |
| **パスワード** | ○ | パスワード | 8文字以上 |
| **ログイン状態を保持** | - | チェックボックス | - |

### ボタン

| ボタン | 動作 |
|-------|------|
| **ログイン** | 認証処理 → ホーム画面 |
| **Appleでログイン** | Apple認証 → ホーム画面 |
| **Googleでログイン** | Google認証 → ホーム画面 |
| **パスワードを忘れた方** | パスワードリセット画面へ |
| **新規登録はこちら** | 新規登録画面へ |

### エラー表示
- メールアドレス/電話番号が未登録: 「このアカウントは登録されていません」
- パスワード不一致: 「メールアドレス/電話番号またはパスワードが正しくありません」
- ネットワークエラー: 「接続に失敗しました。ネットワーク接続を確認してください」

### v3.1での変更点
- 変更なし

---

## 3.4 新規登録画面

### 目的
- 新規ユーザーのアカウント作成

### ステップ1/2: 基本情報入力

```
┌─────────────────────────────
│ [← 戻る]   新規登録 (1/2)   │
│                             │
│  基本情報を入力してください   │
│                             │
│  ┌─────────────────────┐  │
│  │メールアドレス または      │  │
│  │電話番号                  │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │パスワード                │  │
│  │(8文字以上)               │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │パスワード（確認）         │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │名前（ニックネーム可）     │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │    次へ                 │  │
│  └─────────────────────┘  │
│                             │
│  ───── または ─────        │
│                             │
│  ┌─────────────────────┐  │
│  │ 🍎 Appleで登録          │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ 📧 Googleで登録         │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### ステップ2/2: 身体情報入力

```
┌─────────────────────────────
│ [← 戻る]   新規登録 (2/2)   │
│                             │
│  身体情報を入力してください   │
│  (あとで変更できます)        │
│                             │
│  ┌─────────────────────┐  │
│  │身長 (cm)                │  │
│  │   170                   │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │体重 (kg)                │  │
│  │   65                    │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │生年月日                  │  │
│  │ 1990年 1月 1日          │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │目標                      │  │
│  │ ▼ 選択してください       │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │    登録する             │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### 入力項目（ステップ1）

| 項目 | 必須 | 形式 | バリデーション |
|-----|------|------|---------------|
| **メールアドレス/電話番号** | ○ | テキスト | メール形式 or 電話番号形式、重複チェック |
| **パスワード** | ○ | パスワード | 8文字以上、英数字含む |
| **パスワード（確認）** | ○ | パスワード | パスワードと一致 |
| **名前** | ○ | テキスト | 1文字以上50文字以内 |

### 入力項目（ステップ2）

| 項目 | 必須 | 形式 | 初期値 | バリデーション |
|-----|------|------|-------|---------------|
| **身長** | ○ | 数値 | - | 100-250cm |
| **体重** | ○ | 数値 | - | 30-200kg |
| **生年月日** | ○ | 日付 | - | 13歳以上 |
| **目標** | - | 選択 | 未選択 | 選択肢: 健康維持/体力向上/ダイエット/筋力アップ/その他 |

### ボタン

| ボタン | 動作 |
|-------|------|
| **次へ（ステップ1）** | バリデーション → ステップ2へ |
| **Appleで登録** | Apple認証 → 利用規約同意画面へ |
| **Googleで登録** | Google認証 → 利用規約同意画面へ |
| **登録する（ステップ2）** | アカウント作成 → 利用規約同意画面へ |

### エラー表示
- メールアドレス/電話番号が既に登録済み: 「このアカウントは既に登録されています」
- パスワードが一致しない: 「パスワードが一致しません」
- 入力形式エラー: 各フィールドに対応したエラーメッセージ

### v3.1での変更点
- 変更なし

---

## 3.5 利用規約同意画面

### 目的
- 利用規約とプライバシーポリシーへの同意取得（v3.1全文表示）
- サービスの性質と制限事項の明示（v3.1強化）

### レイアウト

```
┌─────────────────────────────
│     利用規約への同意         │
│                             │
│  サービスをご利用いただく前に │
│  利用規約とプライバシーポリシー│
│  をご確認ください。           │
│                             │
│  ┌─────────────────────┐  │
│  │ 利用規約               ││  │
│  │ ═══════════════════  ││  │
│  │                       ││  │
│  │ 第1条（本規約の適用）   ││  │
│  │ 本規約は、本サービスの  ││  │
│  │ 利用に関する条件...     ││  │
│  │                       ││  │
│  │ 第2条（定義）          ││  │
│  │ 1. 本サービス: 株式会社 ││  │
│  │ [会社名]が提供する...   ││  │
│  │                       ││  │
│  │ 第3条（サービスの概要）  ││  │
│  │ 3.1 本サービスは...     ││  │
│  │ 3.2 本サービスは...     ││  │
│  │ 3.3 本サービスは医療機器││  │
│  │     ではありません       ││  │
│  │     ・診断・治療・予防を ││  │
│  │      目的としません      ││  │
│  │     ・怪我の防止を       ││  │
│  │      保証しません        ││  │
│  │     ・健康効果を         ││  │
│  │      保証しません        ││  │
│  │                       ││  │
│  │ (スクロールして         ││  │
│  │  全文を確認)            ││  │
│  │                       ↓│  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ プライバシーポリシー    ││  │
│  │ ═══════════════════  ││  │
│  │                       ││  │
│  │ 第1条（基本方針）       ││  │
│  │ 当社は、個人情報の...   ││  │
│  │                       ││  │
│  │ 第2条（収集する情報）   ││  │
│  │ 2.1 アカウント情報...   ││  │
│  │ 2.2 身体情報...         ││  │
│  │ 2.3 トレーニングデータ: ││  │
│  │     ・カメラ映像は       ││  │
│  │      端末内のみで処理   ││  │
│  │     ・骨格の位置データのみ││  │
│  │      を記録・送信        ││  │
│  │                       ││  │
│  │ (スクロールして         ││  │
│  │  全文を確認)            ││  │
│  │                       ↓│  │
│  └─────────────────────┘  │
│                             │
│  ⚠ 重要なお知らせ            │
│  ・本サービスは参考情報を    │
│    提供するものです          │
│  ・医療機器ではありません    │
│  ・最終的な判断はご自身で    │
│    行ってください            │
│                             │
│  □ 利用規約に同意する       │
│  □ プライバシーポリシーに    │
│     同意する                │
│                             │
│  ┌─────────────────────┐  │
│  │    同意して始める       │  │
│  └─────────────────────┘  │
│                             │
│  ※両方にチェックを入れないと │
│    サービスを利用できません   │
│                             │
└─────────────────────────────
```

### 要素

| 要素 | 内容 | 動作 |
|-----|------|------|
| **利用規約テキスト** | 利用規約v3.1の全文 | スクロール可能 |
| **プライバシーポリシーテキスト** | プライバシーポリシーv3.1の全文 | スクロール可能 |
| **重要なお知らせ** | サービスの性質と制限事項（v3.1） | 常に表示 |
| **同意チェックボックス** | 2つ（利用規約・プライバシーポリシー） | 両方必須 |
| **同意して始めるボタン** | ホーム画面へ遷移 | 両方同意時のみ有効 |

### インタラクション
- 各テキストボックスは縦スクロール可能
- 2つのチェックボックスにチェックを入れるまで「同意して始める」ボタンは非活性
- 両方にチェックを入れると「同意して始める」ボタンが活性化

### 表示条件
- 新規登録時（必須）
- 利用規約更新時（未同意の場合のみ）

### データ保存
- 同意日時をFirestoreに記録（GDPR要件）
- 同意バージョン（v3.1）を記録

### v3.1での変更点
- 利用規約v3.1の全文を表示（要件定義書v3.1第4.10項準拠）
- プライバシーポリシーv3.1の全文を表示（要件定義書v3.1第4.10項準拠）
- 「重要なお知らせ」セクションを追加し、医療機器でない旨を明示（利用規約v3.1第3.3条準拠）
- オンデバイス処理の説明を追加（プライバシーポリシーv3.1第2.3条準拠）
- スクロール可能な全文表示により、ユーザーが内容を確認できることを保証

---

## 3.6 ホーム画面

### 目的
- トレーニング開始、履歴確認、アカウント管理へのアクセス
- 今日のトレーニング状況の概要表示
- 免責事項の適切な表示（v3.1）

### レイアウト

```
┌─────────────────────────────
│ [☰]    ホーム           [👤]│
│                             │
│  こんにちは、[名前]さん!     │
│                             │
│  ┌─────────────────────┐  │
│  │ 今日の進捗              │  │
│  │                        │  │
│  │ 🔥 連続記録: 5日        │  │
│  │ ✅ 完了: 2/3セッション  │  │
│  │ ⏱ 時間: 45分           │  │
│  └─────────────────────┘  │
│                             │
│  ℹ️ 参考情報について         │
│  本アプリは参考情報を提供します│
│  最終的な判断はご自身で       │
│  行ってください              │
│                             │
│  ┌─────────────────────┐  │
│  │                        │  │
│  │   🏋️ トレーニング開始   │  │
│  │                        │  │
│  └─────────────────────┘  │
│                             │
│  最近のアクティビティ         │
│  ─────────────────────    │
│                             │
│  [📊] スクワット             │
│  2025/11/21  10回×3セット   │
│  参考スコア: 85点            │
│                             │
│  [📊] プッシュアップ         │
│  2025/11/20  15回×3セット   │
│  参考スコア: 78点            │
│                             │
│  [📊] プランク              │
│  2025/11/19  30秒×3セット   │
│  参考スコア: 92点            │
│                             │
│  ┌─────────────────────┐  │
│  │  すべての履歴を見る     │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
│[🏠 ホーム][📊 履歴][⚙️ 設定]│
└─────────────────────────────
```

### 要素

| 要素 | 内容 | 動作 |
|-----|------|------|
| **ハンバーガーメニュー** | メニューアイコン | サイドメニュー表示 |
| **プロフィールアイコン** | ユーザーアイコン | プロフィール画面へ |
| **挨拶メッセージ** | ユーザー名表示 | - |
| **今日の進捗** | 連続記録、完了セッション数、時間 | - |
| **参考情報について（v3.1追加）** | 免責事項の簡潔な説明 | タップで詳細表示 |
| **トレーニング開始ボタン** | メインアクション | メニュー選択画面へ |
| **最近のアクティビティ** | 直近3件の履歴 | 各項目タップで詳細表示 |
| **すべての履歴を見るボタン** | 履歴一覧へ | 履歴画面へ |
| **ボトムナビゲーション** | ホーム/履歴/設定 | 各画面へ遷移 |

### データ表示

| データ | 取得元 |
|-------|-------|
| **連続記録** | Firestore: users/{userId}/stats/consecutiveDays |
| **完了セッション数** | 当日のsessionsコレクション |
| **時間** | 当日のsessionsコレクションの合計時間 |
| **最近のアクティビティ** | Firestore: sessions（最新3件） |

### v3.1での変更点
- 「参考情報について」セクションを追加（利用規約v3.1第3.3条・第3.4条準拠）
- 免責事項を常時表示し、ユーザーがサービスの性質を理解できるようにする
- 「参考スコア」の表記を統一（要件定義書v3.1と整合）

---

## 3.7 メニュー選択画面

### 目的
- トレーニング種目の選択
- 種目の検索・フィルタリング

### レイアウト

```
┌─────────────────────────────
│ [← 戻る]  トレーニング選択   │
│                             │
│  ┌─────────────────────┐  │
│  │ 🔍 種目を検索...        │  │
│  └─────────────────────┘  │
│                             │
│  [すべて][上半身][下半身]    │
│  [体幹][有酸素]              │
│                             │
│  フィルタ: [難易度 ▼]        │
│                             │
│  ─────────────────────    │
│                             │
│  ┌─────────────────────┐  │
│  │ 🏋️ スクワット            │  │
│  │ 下半身・体幹  初級        │  │
│  │ 鍛える部位: 大腿四頭筋、  │  │
│  │            臀筋、体幹   │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ 💪 プッシュアップ        │  │
│  │ 上半身・体幹  初級        │  │
│  │ 鍛える部位: 大胸筋、      │  │
│  │            上腕三頭筋   │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ 🧘 プランク              │  │
│  │ 体幹  初級               │  │
│  │ 鍛える部位: 腹直筋、      │  │
│  │            腹斜筋       │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ 🦵 ランジ               │  │
│  │ 下半身  中級             │  │
│  │ 鍛える部位: 大腿四頭筋、  │  │
│  │            臀筋         │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ 🏃 バーピー              │  │
│  │ 全身・有酸素  上級        │  │
│  │ 鍛える部位: 全身         │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### 要素

| 要素 | 内容 | 動作 |
|-----|------|------|
| **検索バー** | 種目名、カテゴリ、鍛える部位で検索 | リアルタイム検索 |
| **フィルタボタン** | すべて/上半身/下半身/体幹/有酸素 | タップでフィルタ適用 |
| **難易度フィルタ** | ドロップダウン選択 | すべて/初級/中級/上級 |
| **種目カード** | 種目名、カテゴリ、難易度、鍛える部位 | タップで選択→カメラ設定画面へ |

### 種目データ（MVP対応5種目）

| 種目 | カテゴリ | 難易度 | 鍛える部位 |
|-----|---------|--------|----------|
| **スクワット** | 下半身・体幹 | 初級 | 大腿四頭筋、臀筋、体幹 |
| **プッシュアップ** | 上半身・体幹 | 初級 | 大胸筋、上腕三頭筋、体幹 |
| **プランク** | 体幹 | 初級 | 腹直筋、腹斜筋、脊柱起立筋 |
| **ランジ** | 下半身 | 中級 | 大腿四頭筋、臀筋、ハムストリングス |
| **バーピー** | 全身・有酸素 | 上級 | 全身 |

### インタラクション
- 検索バー: リアルタイムで結果を絞り込み
- フィルタボタン: タップでON/OFF切り替え（複数選択可）
- 難易度フィルタ: ドロップダウンで単一選択
- 種目カード: タップで選択 → 課金状態チェック → カメラ設定画面へ

### v3.1での変更点
- 変更なし

---

## 3.8 カメラ設定画面

### 目的
- カメラの向きと距離の調整
- オンデバイス処理の説明（v3.1追加）
- 最適なトレーニング環境のセットアップ

### レイアウト

```
┌─────────────────────────────
│ [← 戻る]  カメラ設定         │
│                             │
│  ┌─────────────────────┐  │
│  │                       ││  │
│  │    [カメラプレビュー]   ││  │
│  │                       ││  │
│  │         ○             ││  │
│  │        ╱│╲            ││  │
│  │       ╱ │ ╲           ││  │
│  │      ○  │  ○          ││  │
│  │         │             ││  │
│  │        ╱│╲            ││  │
│  │       ╱ │ ╲           ││  │
│  │      ○  │  ○          ││  │
│  │                       ││  │
│  │  ← 2〜3m離れてください → ││  │
│  │                       ││  │
│  └─────────────────────┘  │
│                             │
│  🔒 プライバシー保護          │
│  カメラ映像は端末内のみで処理 │
│  され、外部に送信されません   │
│                             │
│  ✓ 全身が画面に収まっている   │
│  ✓ 明るい場所で撮影する       │
│  ✓ 背景に人や物がない         │
│                             │
│  選択種目: スクワット         │
│  推奨向き: 横向き            │
│                             │
│  ┌─────────────────────┐  │
│  │  [🔄] 向きを変更        │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │    準備完了             │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### 要素

| 要素 | 内容 | 動作 |
|-----|------|------|
| **カメラプレビュー** | リアルタイム映像と骨格オーバーレイ | 常に表示 |
| **プライバシー保護説明（v3.1追加）** | オンデバイス処理の説明 | 常に表示 |
| **チェックリスト** | セットアップ確認項目 | 条件満たすと✓表示 |
| **選択種目** | 選択したトレーニング種目 | - |
| **推奨向き** | 種目に応じた推奨カメラ向き | - |
| **向きを変更ボタン** | カメラの向き切り替え | タップで前面/背面切り替え |
| **準備完了ボタン** | トレーニング開始 | トレーニング実行画面へ |

### カメラ向き推奨

| 種目 | 推奨向き | 理由 |
|-----|---------|------|
| **スクワット** | 横向き | 膝の角度、腰の位置を確認しやすい |
| **プッシュアップ** | 横向き | 肘の角度、体の一直線を確認しやすい |
| **プランク** | 横向き | 体の一直線、腰の位置を確認しやすい |
| **ランジ** | 横向き | 膝の角度、腰の位置を確認しやすい |
| **バーピー** | 正面 | 全体の動きを確認しやすい |

### 骨格オーバーレイ表示
- MediaPipe Poseによる33点の関節位置をリアルタイム表示
- 関節点: 緑の○（検出成功）、グレーの○（検出失敗）
- 骨格線: 緑の線（全身検出成功時）、オレンジの線（一部検出失敗時）

### チェック条件

| 条件 | 判定基準 |
|-----|---------|
| **全身が画面に収まっている** | 主要33関節点のうち28点以上が検出されている |
| **明るい場所で撮影する** | カメラの露出値が基準値以上 |
| **背景に人や物がない** | 検出される人物が1人のみ |

### v3.1での変更点
- 「プライバシー保護」セクションを追加（プライバシーポリシーv3.1第2.3条準拠）
- オンデバイス処理の明示により、ユーザーのプライバシー懸念を軽減
- カメラ映像が外部に送信されないことを明確に説明

---

## 3.9 トレーニング実行画面

### 目的
- リアルタイムフォーム確認補助
- 参考情報の提供（v3.1強化）
- 回数・時間のカウント

### レイアウト（回数カウント種目）

```
┌─────────────────────────────
│  [✕]                 [⏸]   │
│                             │
│  ┌─────────────────────┐  │
│  │                       ││  │
│  │    [カメラ映像]        ││  │
│  │                       ││  │
│  │         ○             ││  │
│  │        ╱│╲            ││  │
│  │       ╱ │ ╲           ││  │
│  │      ○  │  ○          ││  │
│  │         │             ││  │
│  │        ╱│╲            ││  │
│  │       ╱ │ ╲           ││  │
│  │      ○  │  ○          ││  │
│  │                       ││  │
│  │  [参考情報: 良好です]   ││  │
│  │                       ││  │
│  └─────────────────────┘  │
│                             │
│  ━━━━━━━━━━━━ 60%        │
│  2セット目  6/10回           │
│                             │
│  ℹ️ 表示されるスコアは参考情報です│
│                             │
│  🔵 膝の角度: 85点           │
│  🔵 背中の姿勢: 92点         │
│  🟡 腰の位置: 78点           │
│                             │
│  💬 音声ガイド               │
│  「膝をもう少し曲げましょう」  │
│                             │
│  ┌─────────────────────┐  │
│  │    セット完了           │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### レイアウト（時間カウント種目：プランク）

```
┌─────────────────────────────
│  [✕]                 [⏸]   │
│                             │
│  ┌─────────────────────┐  │
│  │                       ││  │
│  │    [カメラ映像]        ││  │
│  │                       ││  │
│  │         ○             ││  │
│  │        ╱│╲            ││  │
│  │       ╱ │ ╲           ││  │
│  │      ○──○──○          ││  │
│  │                       ││  │
│  │                       ││  │
│  │  [参考情報: 良好です]   ││  │
│  │                       ││  │
│  └─────────────────────┘  │
│                             │
│  ━━━━━━━━━━━━ 50%        │
│  2セット目  15秒/30秒        │
│                             │
│  ℹ️ 表示されるスコアは参考情報です│
│                             │
│  🔵 体の一直線: 88点         │
│  🔵 肘の位置: 95点           │
│  🟡 腰の高さ: 75点           │
│                             │
│  💬 音声ガイド               │
│  「腰を少し上げましょう」     │
│                             │
│  ┌─────────────────────┐  │
│  │    セット完了           │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### 要素

| 要素 | 内容 | 動作 |
|-----|------|------|
| **閉じるボタン** | トレーニング中止 | 確認ダイアログ→メニュー選択画面へ |
| **一時停止ボタン** | トレーニング一時停止 | カウント停止、再開ボタン表示 |
| **カメラ映像** | リアルタイム映像と骨格オーバーレイ | 常に表示 |
| **参考情報表示** | フォームの総合判定（v3.1強化） | リアルタイム更新 |
| **進捗バー** | 全体の進捗（YouTube風） | リアルタイム更新 |
| **セット・回数/時間表示** | 現在のセットと進捗 | リアルタイム更新 |
| **参考情報の注意書き（v3.1追加）** | スコアが参考情報である旨の説明 | 常に表示 |
| **部位別参考スコア** | 各チェックポイントのスコア（v3.1） | リアルタイム更新 |
| **音声ガイド** | フォーム改善の提案 | 音声とテキストで表示 |
| **セット完了ボタン** | 次のセットへ or 結果画面へ | セット終了時に表示 |

### 骨格オーバーレイ表示

| 要素 | 表示方法 | 色 |
|-----|---------|---|
| **関節点** | ○（円） | 緑（良好）、黄（注意）、赤（要改善） |
| **骨格線** | 直線 | 緑（良好）、黄（注意）、赤（要改善） |
| **角度表示** | 数値オーバーレイ | 主要な角度を表示 |

### 参考スコアの色分け（v3.1統一）

| スコア範囲 | 色 | 判定 |
|-----------|---|------|
| **90-100点** | 🔵 青 | 優良 |
| **70-89点** | 🟡 黄 | 良好（改善余地あり） |
| **50-69点** | 🟠 オレンジ | 注意 |
| **0-49点** | 🔴 赤 | 要改善 |

### 音声ガイド

| タイミング | 内容例 |
|----------|-------|
| **開始時** | 「スタート！」 |
| **フォーム注意時** | 「膝をもう少し曲げましょう」「背中をまっすぐに保ちましょう」 |
| **回数カウント** | 「5回」「10回」 |
| **セット完了時** | 「セット完了！お疲れ様でした！」 |
| **休憩中** | 「次のセットまであと10秒」 |

### フォーム判定ロジック（各種目共通）

1. **MediaPipe Poseで骨格検出**: 33点の関節位置を取得
2. **角度計算**: 主要な関節の角度を計算
3. **基準値との比較**: 理想的な角度範囲と比較
4. **参考スコア算出**: 各チェックポイントの偏差から参考スコアを算出（v3.1）
5. **音声ガイド**: 改善ポイントを音声で通知

### v3.1での変更点
- 「参考情報」「参考スコア」の表記を統一（要件定義書v3.1準拠）
- 「表示されるスコアは参考情報です」の注意書きを常時表示（利用規約v3.1第3.4条準拠）
- スコアが診断や判定ではなく、参考情報であることを明確化
- 「フォームスコア」を「参考スコア」に変更し、表現を統一

---

## 3.10 セッション結果画面

### 目的
- トレーニング結果の表示
- 参考スコアの説明（v3.1強化）
- 次のアクションへの誘導

### レイアウト

```
┌─────────────────────────────
│ [✕]      セッション結果      │
│                             │
│  🎉 お疲れ様でした！         │
│                             │
│  ┌─────────────────────┐  │
│  │ スクワット              │  │
│  │                        │  │
│  │ 完了: 3セット            │  │
│  │ 回数: 10回 × 3          │  │
│  │ 時間: 12分30秒          │  │
│  │                        │  │
│  │ ─────────────────    │  │
│  │                        │  │
│  │ 📊 参考スコア            │  │
│  │                        │  │
│  │ ℹ️ 以下は参考情報です     │  │
│  │   最終的な判断はご自身で │  │
│  │   行ってください         │  │
│  │                        │  │
│  │ 総合: 85点               │  │
│  │ ━━━━━━━━━━━━━━━     │  │
│  │                        │  │
│  │ 膝の角度: 88点           │  │
│  │ 背中の姿勢: 92点         │  │
│  │ 腰の位置: 75点           │  │
│  └─────────────────────┘  │
│                             │
│  🔥 連続記録: 6日            │
│  ⭐ 今週の完了: 8/10セッション│
│                             │
│  メモ（任意）                │
│  ┌─────────────────────┐  │
│  │ 今日の調子など...        │  │
│  │                        │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  もう1セット             │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  完了                   │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### 要素

| 要素 | 内容 | 動作 |
|-----|------|------|
| **祝福メッセージ** | セッション完了の祝福 | - |
| **種目名** | 実施した種目 | - |
| **完了情報** | セット数、回数/時間、総時間 | - |
| **参考スコア表示（v3.1強化）** | 総合・部位別の参考スコア | - |
| **参考情報の説明（v3.1追加）** | スコアが参考情報である旨の説明 | 常に表示 |
| **連続記録** | 連続トレーニング日数 | - |
| **今週の完了** | 今週の目標達成状況 | - |
| **メモ入力欄** | 任意のメモ | 自動保存（画面遷移時） |
| **もう1セットボタン** | 同じ種目を再度実施 | メニュー選択画面へ |
| **完了ボタン** | トレーニング終了 | 自動保存→ホーム画面へ |

### データ保存

| データ | 保存先 | タイミング |
|-------|-------|----------|
| **セッション情報** | Firestore: sessions | 「完了」ボタン押下時 |
| **メモ** | Firestore: sessions/{sessionId}/memo | 画面遷移時（自動保存） |
| **連続記録** | Firestore: users/{userId}/stats | 「完了」ボタン押下時 |

### 参考スコアの計算（v3.1統一）

総合参考スコア = (膝の角度スコア + 背中の姿勢スコア + 腰の位置スコア) / 3

※各部位のスコアは、理想的な角度・位置からの偏差に基づいて算出されます。

### v3.1での変更点
- 「フォームスコア」を「参考スコア」に変更（要件定義書v3.1準拠）
- 参考情報の説明を追加し、スコアの性質を明確化（利用規約v3.1第3.4条準拠）
- 「最終的な判断はご自身で行ってください」の文言を追加
- メモの自動保存機能を明記（v2.0の変更を継承）

---

## 3.11 履歴画面

### 目的
- トレーニング履歴の表示
- 進捗の可視化
- 過去のセッション詳細確認

### レイアウト

```
┌─────────────────────────────
│ [☰]    履歴              [⚙]│
│                             │
│  [週][月][3ヶ月][全期間]     │
│                             │
│  ┌─────────────────────┐  │
│  │    進捗グラフ           │  │
│  │                        │  │
│  │  100│         ●        │  │
│  │   90│      ●  ││       │  │
│  │   80│   ●     ││  ●    │  │
│  │   70│●        ││       │  │
│  │     └─────────────    │  │
│  │      月  火  水  木  金  │  │
│  │                        │  │
│  │  📊 参考スコアの推移     │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ 統計情報                │  │
│  │                        │  │
│  │ 総セッション数: 45回     │  │
│  │ 総時間: 15時間30分       │  │
│  │ 平均参考スコア: 82点     │  │
│  │ 連続記録: 6日            │  │
│  │ 最長連続: 12日           │  │
│  └─────────────────────┘  │
│                             │
│  履歴一覧                   │
│  ─────────────────────    │
│                             │
│  📅 2025/11/21（今日）       │
│                             │
│  [📊] スクワット             │
│  10:30  10回×3セット         │
│  参考スコア: 85点  12分30秒  │
│                             │
│  [📊] プッシュアップ         │
│  15:00  15回×3セット         │
│  参考スコア: 78点  10分00秒  │
│                             │
│  📅 2025/11/20               │
│                             │
│  [📊] プランク              │
│  11:00  30秒×3セット         │
│  参考スコア: 92点  8分30秒   │
│                             │
│  [📊] スクワット             │
│  16:30  10回×3セット         │
│  参考スコア: 83点  11分00秒  │
│                             │
│  ┌─────────────────────┐  │
│  │  さらに読み込む          │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
│[🏠 ホーム][📊 履歴][⚙️ 設定]│
└─────────────────────────────
```

### 要素

| 要素 | 内容 | 動作 |
|-----|------|------|
| **期間選択** | 週/月/3ヶ月/全期間 | タップで切り替え |
| **進捗グラフ** | 参考スコアの推移（v3.1） | 期間に応じて表示 |
| **統計情報** | 総セッション数、総時間、平均参考スコアなど | - |
| **履歴一覧** | 日付ごとのセッション一覧 | タップで詳細表示 |
| **さらに読み込むボタン** | 過去の履歴を追加表示 | ページネーション |

### グラフ表示

| 期間 | X軸 | Y軸 | 表示内容 |
|-----|-----|-----|---------|
| **週** | 曜日 | 参考スコア | 過去7日間の日別平均参考スコア |
| **月** | 週 | 参考スコア | 過去4週間の週別平均参考スコア |
| **3ヶ月** | 月 | 参考スコア | 過去3ヶ月の月別平均参考スコア |
| **全期間** | 月 | 参考スコア | 全期間の月別平均参考スコア |

### 履歴項目をタップした際の詳細表示

```
┌─────────────────────────────
│ [← 戻る]  セッション詳細     │
│                             │
│  📅 2025/11/21 10:30        │
│                             │
│  ┌─────────────────────┐  │
│  │ スクワット              │  │
│  │                        │  │
│  │ セット数: 3             │  │
│  │ 回数: 10回 × 3          │  │
│  │ 時間: 12分30秒          │  │
│  │                        │  │
│  │ ─────────────────    │  │
│  │                        │  │
│  │ 📊 参考スコア            │  │
│  │ 総合: 85点               │  │
│  │                        │  │
│  │ 膝の角度: 88点           │  │
│  │ 背中の姿勢: 92点         │  │
│  │ 腰の位置: 75点           │  │
│  │                        │  │
│  │ ─────────────────    │  │
│  │                        │  │
│  │ メモ:                   │  │
│  │ 今日は調子が良かった     │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  この種目を再度実施      │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  削除                   │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### v3.1での変更点
- 「フォームスコア」を「参考スコア」に統一（要件定義書v3.1準拠）
- グラフのY軸ラベルを「参考スコア」に変更
- 統計情報の「平均フォームスコア」を「平均参考スコア」に変更

---

## 3.12 プロフィール画面

### 目的
- ユーザー情報の表示・編集
- データ管理機能へのアクセス（v3.1追加）
- アカウント設定

### レイアウト

```
┌─────────────────────────────
│ [← 戻る]  プロフィール       │
│                             │
│        [👤 アイコン]         │
│         [変更]              │
│                             │
│  名前                        │
│  ┌─────────────────────┐  │
│  │ 山田 太郎               │  │
│  └─────────────────────┘  │
│                             │
│  メールアドレス              │
│  ┌─────────────────────┐  │
│  │ yamada@example.com     │  │
│  └─────────────────────┘  │
│                             │
│  身長                        │
│  ┌─────────────────────┐  │
│  │ 170 cm                 │  │
│  └─────────────────────┘  │
│                             │
│  体重                        │
│  ┌─────────────────────┐  │
│  │ 65 kg                  │  │
│  └─────────────────────┘  │
│                             │
│  生年月日                    │
│  ┌─────────────────────┐  │
│  │ 1990年1月1日            │  │
│  └─────────────────────┘  │
│                             │
│  目標                        │
│  ┌─────────────────────┐  │
│  │ ▼ 体力向上              │  │
│  └─────────────────────┘  │
│                             │
│  ─────────────────────    │
│                             │
│  🔒 データ管理（v3.1追加）   │
│                             │
│  ┌─────────────────────┐  │
│  │  データのダウンロード    │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  データの削除           │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  保存                   │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### 入力項目

| 項目 | 必須 | 形式 | バリデーション |
|-----|------|------|---------------|
| **アイコン画像** | - | 画像 | 5MB以下、jpg/png |
| **名前** | ○ | テキスト | 1文字以上50文字以内 |
| **メールアドレス** | ○ | テキスト | メール形式、重複チェック |
| **身長** | ○ | 数値 | 100-250cm |
| **体重** | ○ | 数値 | 30-200kg |
| **生年月日** | ○ | 日付 | 13歳以上 |
| **目標** | - | 選択 | 健康維持/体力向上/ダイエット/筋力アップ/その他 |

### ボタン

| ボタン | 動作 |
|-------|------|
| **アイコン変更** | 画像選択→アップロード |
| **データのダウンロード（v3.1追加）** | 個人データをJSON形式でダウンロード |
| **データの削除（v3.1追加）** | 確認ダイアログ→全データ削除 |
| **保存** | プロフィール更新 |

### データのダウンロード機能（v3.1追加）

プライバシーポリシーv3.1第9.1条（データポータビリティ権）に基づき、ユーザーは自身のデータをダウンロードできます。

**ダウンロードされるデータ**:
- アカウント情報（名前、メールアドレス、身長、体重、生年月日、目標）
- トレーニング履歴（セッション情報、参考スコア、メモ）
- 統計情報（連続記録、総セッション数など）

**形式**: JSON

### データの削除機能（v3.1追加）

プライバシーポリシーv3.1第9.2条（削除権）に基づき、ユーザーは自身のデータを削除できます。

**確認ダイアログ**:
```
┌─────────────────────────────
│  データの削除                │
│                             │
│  すべてのデータを削除しますか? │
│                             │
│  以下のデータが削除されます:   │
│  ・アカウント情報            │
│  ・トレーニング履歴          │
│  ・統計情報                  │
│                             │
│  この操作は取り消せません。   │
│                             │
│  ┌─────────────────────┐  │
│  │  キャンセル             │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  削除する               │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### v3.1での変更点
- 「データ管理」セクションを追加（プライバシーポリシーv3.1第9条準拠）
- データのダウンロード機能を実装（GDPRデータポータビリティ権）
- データの削除機能を実装（GDPR削除権）

---

## 3.13 設定画面

### 目的
- アプリ設定の管理
- プライバシー設定の管理（v3.1強化）
- アカウント管理

### レイアウト

```
┌─────────────────────────────
│ [← 戻る]  設定               │
│                             │
│  通知設定                    │
│  ─────────────────────    │
│                             │
│  トレーニングリマインダー     │
│  [○────────────]  ON       │
│                             │
│  セッション完了通知          │
│  [○────────────]  ON       │
│                             │
│  週次レポート                │
│  [───────○────]  OFF      │
│                             │
│  ─────────────────────    │
│                             │
│  トレーニング設定            │
│  ─────────────────────    │
│                             │
│  音声ガイド                  │
│  [○────────────]  ON       │
│                             │
│  音声ガイドの音量            │
│  [────○──────]  70%        │
│                             │
│  カウント音                  │
│  [○────────────]  ON       │
│                             │
│  ─────────────────────    │
│                             │
│  プライバシー設定（v3.1強化）│
│  ─────────────────────    │
│                             │
│  ┌─────────────────────┐  │
│  │  データ処理の詳細を見る  │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  プライバシーポリシー    │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  同意の管理             │  │
│  └─────────────────────┘  │
│                             │
│  ─────────────────────    │
│                             │
│  アカウント                  │
│  ─────────────────────    │
│                             │
│  ┌─────────────────────┐  │
│  │  利用規約               │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  サブスクリプション管理  │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  ログアウト             │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  アカウント削除         │  │
│  └─────────────────────┘  │
│                             │
│  ─────────────────────    │
│                             │
│  その他                      │
│  ─────────────────────    │
│                             │
│  バージョン: 1.0.0 (MVP)     │
│                             │
│  ┌─────────────────────┐  │
│  │  お問い合わせ           │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  よくある質問           │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### 設定項目

| カテゴリ | 設定項目 | 初期値 | 説明 |
|---------|---------|-------|------|
| **通知設定** | トレーニングリマインダー | ON | 設定した時間に通知 |
| | セッション完了通知 | ON | セッション完了時に通知 |
| | 週次レポート | OFF | 毎週月曜日に通知 |
| **トレーニング設定** | 音声ガイド | ON | トレーニング中の音声ガイド |
| | 音声ガイドの音量 | 70% | 音声ガイドの音量調整 |
| | カウント音 | ON | 回数カウント時の音 |
| **プライバシー設定（v3.1強化）** | データ処理の詳細 | - | データ処理方法の説明 |
| | プライバシーポリシー | - | プライバシーポリシー表示 |
| | 同意の管理 | - | 同意内容の確認・変更 |
| **アカウント** | 利用規約 | - | 利用規約表示 |
| | サブスクリプション管理 | - | 課金状態確認・変更 |
| | ログアウト | - | ログアウト処理 |
| | アカウント削除 | - | アカウント削除処理 |

### データ処理の詳細画面（v3.1追加）

```
┌─────────────────────────────
│ [← 戻る]  データ処理の詳細   │
│                             │
│  🔒 カメラ映像の処理         │
│                             │
│  カメラ映像は端末内のみで     │
│  処理され、外部に送信されません│
│                             │
│  処理方法:                   │
│  1. カメラ映像をキャプチャ    │
│  2. MediaPipe Poseで         │
│     骨格の位置を検出         │
│  3. 骨格の座標データのみを    │
│     抽出                    │
│  4. カメラ映像は即座に破棄   │
│                             │
│  ─────────────────────    │
│                             │
│  📊 記録・送信されるデータ    │
│                             │
│  以下のデータのみが記録され、  │
│  サーバーに送信されます:      │
│                             │
│  ・骨格の位置データ（座標）   │
│  ・参考スコア                │
│  ・セッション情報            │
│    (日時、種目、回数など)     │
│                             │
│  ─────────────────────    │
│                             │
│  🔐 データの保護             │
│                             │
│  送信されるデータは:          │
│  ・TLS 1.3で暗号化           │
│  ・Firebase Security Rulesで  │
│    アクセス制御              │
│  ・個人を特定できない形式で   │
│    保存（仮名化）            │
│                             │
│  詳細はプライバシーポリシーを  │
│  ご確認ください。             │
│                             │
└─────────────────────────────
```

### 同意の管理画面（v3.1追加）

```
┌─────────────────────────────
│ [← 戻る]  同意の管理         │
│                             │
│  現在の同意状況              │
│                             │
│  ✓ 利用規約                 │
│    同意日: 2025/11/01        │
│    バージョン: v3.1          │
│                             │
│  ✓ プライバシーポリシー      │
│    同意日: 2025/11/01        │
│    バージョン: v3.1          │
│                             │
│  ─────────────────────    │
│                             │
│  ┌─────────────────────┐  │
│  │  利用規約を再確認       │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  プライバシーポリシーを  │  │
│  │  再確認                 │  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### v3.1での変更点
- 「プライバシー設定」セクションを強化（プライバシーポリシーv3.1第8条準拠）
- 「データ処理の詳細」画面を追加し、オンデバイス処理を明示
- 「同意の管理」画面を追加し、同意内容の確認・変更を可能に（GDPR要件）
- データ保護の具体的な方法を説明

---

## 3.14 課金画面

### 目的
- サブスクリプションプランの選択
- 決済処理

### レイアウト

```
┌─────────────────────────────
│ [✕]      プラン選択          │
│                             │
│  無料プランの制限に達しました │
│                             │
│  ┌─────────────────────┐  │
│  │ 無料プラン              │  │
│  │                        │  │
│  │ ¥0 / 月                │  │
│  │                        │  │
│  │ ✓ 1日3回まで            │  │
│  │ ✓ 基本機能              │  │
│  │ ✓ 5種目                 │  │
│  │                        │  │
│  │ ✕ 回数制限あり          │  │
│  │ ✕ 履歴の保存期間: 7日   │  │
│  │                        │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ プレミアムプラン  ⭐    │  │
│  │                        │  │
│  │ ¥500 / 月              │  │
│  │                        │  │
│  │ ✓ 無制限                │  │
│  │ ✓ すべての機能          │  │
│  │ ✓ 5種目                 │  │
│  │ ✓ 詳細な参考スコア      │  │
│  │ ✓ 履歴の無期限保存      │  │
│  │ ✓ エクスポート機能      │  │
│  │                        │  │
│  │ [選択する]              │  │
│  └─────────────────────┘  │
│                             │
│  🎁 初回1週間無料！          │
│                             │
│  ・いつでもキャンセル可能    │
│  ・自動更新                  │
│  ・端末の設定から管理        │
│                             │
│  ┌─────────────────────┐  │
│  │  購入する               │  │
│  └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │  購入を復元             │  │
│  └─────────────────────┘  │
│                             │
│  利用規約  |  プライバシーポリシー│
│                             │
└─────────────────────────────
```

### プラン比較

| 機能 | 無料プラン | プレミアムプラン |
|-----|----------|----------------|
| **月額料金** | ¥0 | ¥500 |
| **トレーニング回数** | 1日3回まで | 無制限 |
| **対応種目** | 5種目 | 5種目 |
| **参考スコア** | 総合のみ | 詳細（部位別） |
| **履歴保存期間** | 7日間 | 無期限 |
| **エクスポート** | ✕ | ○ |
| **広告** | あり | なし |

### ボタン

| ボタン | 動作 |
|-------|------|
| **選択する（プレミアム）** | プランを選択 |
| **購入する** | 決済処理（App Store / Google Play） |
| **購入を復元** | 既存の購入を復元 |

### 決済フロー

1. **プラン選択**: プレミアムプランの「選択する」をタップ
2. **確認**: 購入確認ダイアログ表示
3. **決済**: App Store / Google Playの決済画面へ
4. **完了**: 決済完了後、プレミアム機能が有効化
5. **画面遷移**: メニュー選択画面へ

### 無料トライアル

- 初回のみ1週間無料
- トライアル期間中はいつでもキャンセル可能
- トライアル終了後、自動的に課金開始

### v3.1での変更点
- 変更なし

---

## 3.15 サブスクリプション管理画面

### 目的
- 課金状態の確認
- サブスクリプションの管理

### レイアウト（プレミアムユーザー）

```
┌─────────────────────────────
│ [← 戻る]  サブスクリプション  │
│                             │
│  現在のプラン                │
│  ─────────────────────    │
│                             │
│ ┌─────────────────────┐  │
│ │ プレミアムプラン          │  │
│ │                         │  │
│ │ 月額 500円               │  │
│ │                         │  │
│ │ 次回更新日:              │  │
│ │ 2025/12/16              │  │
│ └─────────────────────┘  │
│                             │
│  自動更新をキャンセルする    │
│  には、端末の設定から         │
│  サブスクリプションを         │
│  管理してください。           │
│                             │
│  ┌─────────────────────┐  │
│  │ 設定を開く              │  │
│  └─────────────────────┘  │
│                             │
│  購入履歴                    │
│  ─────────────────────    │
│  2025/11/16  ¥500          │
│  2025/10/16  ¥500          │
│  2025/09/16  ¥500          │
│                             │
└─────────────────────────────
```

### レイアウト（無料ユーザー）

```
┌─────────────────────────────
│ [← 戻る]  サブスクリプション  │
│                             │
│  現在のプラン                │
│  ─────────────────────    │
│                             │
│ ┌─────────────────────┐  │
│ │ 無料プラン               │  │
│ │                         │  │
│ │ 1日3回まで利用可能       │  │
│ │                         │  │
│ │ 残り: 1回                │  │
│ │ リセットまで: 5時間      │  │
│ └─────────────────────┘  │
│                             │
│  ┌─────────────────────┐  │
│  │ プレミアムにアップグレード│  │
│  └─────────────────────┘  │
│                             │
└─────────────────────────────
```

### 要素

| 要素 | 内容 | 動作 |
|-----|------|------|
| **現在のプラン** | プラン名、料金、更新日 | - |
| **設定を開くボタン** | 端末の設定画面へ | iOSはApp Store、AndroidはGoogle Play |
| **購入履歴** | 過去の購入履歴 | - |
| **プレミアムにアップグレードボタン** | 課金画面へ | 無料ユーザーのみ表示 |

### キャンセル方法

**iOS**:
1. 「設定」アプリを開く
2. ユーザー名 → 「サブスクリプション」
3. 該当するサブスクリプションを選択
4. 「サブスクリプションをキャンセル」

**Android**:
1. Google Playアプリを開く
2. メニュー → 「定期購入」
3. 該当するサブスクリプションを選択
4. 「定期購入を解約」

### v3.1での変更点
- 変更なし

---

## 4. UI/UXガイドライン

### 4.1 カラーパレット

| 用途 | カラー | 使用場所 |
|-----|--------|---------|
| **プライマリ** | 緑（#00C853） | ボタン・アクセント |
| **セカンダリ** | ダークグレー（#212121） | テキスト |
| **背景** | ホワイト（#FFFFFF） | 通常モード |
| **背景（ダーク）** | ダークグレー（#121212） | ダークモード |
| **成功** | 緑（#4CAF50） | 骨格オーバーレイ（OK） |
| **エラー** | 赤（#F44336） | 骨格オーバーレイ（NG） |
| **警告** | オレンジ（#FF9800） | 警告メッセージ |
| **参考情報（v3.1）** | 青（#2196F3） | 参考スコア表示背景 |

### 4.2 タイポグラフィ

| 要素 | フォント | サイズ | ウェイト |
|-----|---------|-------|---------|
| **大見出し** | システムフォント | 24px | Bold |
| **中見出し** | システムフォント | 18px | Bold |
| **本文** | システムフォント | 16px | Regular |
| **小文字** | システムフォント | 14px | Regular |
| **キャプション** | システムフォント | 12px | Regular |

### 4.3 ボタンスタイル

| 種類 | 背景色 | テキスト色 | 用途 |
|-----|--------|----------|------|
| **プライマリ** | 緑 | 白 | 主要なアクション |
| **セカンダリ** | 白（枠線あり） | 緑 | 副次的なアクション |
| **テキスト** | 透明 | 緑 | リンク |

### 4.4 アイコン

- Material Icons を使用
- サイズ: 24px（基本）
- 色: テキスト色に準拠

### 4.5 参考情報の表示ガイドライン（v3.1追加）

参考情報を表示する際は、以下のガイドラインに従います:

| 原則 | 説明 | 実装例 |
|-----|------|-------|
| **明確な表示** | 参考情報であることを明示 | 「ℹ️ 参考情報」アイコンと文言 |
| **説明の追加** | スコアの性質を説明 | 「表示されるスコアは参考情報です」 |
| **免責の明記** | 最終判断はユーザー | 「最終的な判断はご自身で行ってください」 |
| **色の統一** | 参考情報は青系統 | 背景色: #E3F2FD（薄い青） |
| **用語の統一** | 「参考スコア」で統一 | 「フォームスコア」は使用しない |

---

## 5. レスポンシブ対応

### 5.1 画面サイズ別対応

| 端末 | 画面幅 | 対応 |
|-----|--------|------|
| **iPhone SE** | 375px | グラフを縦並び・フォント縮小 |
| **標準スマホ** | 375-414px | 基本レイアウト |
| **大型スマホ** | 414px以上 | 基本レイアウト（余白増） |
| **タブレット** | 768px以上 | スマホと同じレイアウト（MVP） |

### 5.2 横向き対応

| 画面 | 対応 |
|-----|------|
| **トレーニング実行画面** | 横向き推奨（カメラ設定で案内） |
| **その他の画面** | 縦向きと同じレイアウト |

---

## 6. 変更履歴

### v3.1（2025年11月22日）

#### グローバル変更
- **用語の統一**: 「フォームスコア」→「参考スコア」、「フォーム確認」→「フォーム確認補助」
- **法的要件の反映**: 利用規約v3.1・プライバシーポリシーv3.1との完全な整合性確保
- **参考情報の明示**: すべての画面で参考情報であることを明確化

#### 3.2 オンボーディング画面
- **変更**: 画面2/3にサービスの性質説明を追加（医療機器でない旨を明示）
- **変更**: 画面3/3にプライバシー保護の説明を追加（オンデバイス処理の説明）

#### 3.5 利用規約同意画面
- **変更**: 利用規約v3.1の全文を表示
- **変更**: プライバシーポリシーv3.1の全文を表示
- **追加**: 「重要なお知らせ」セクションで医療機器でない旨を明示
- **追加**: オンデバイス処理の説明を追加

#### 3.6 ホーム画面
- **追加**: 「参考情報について」セクションで免責事項を常時表示
- **変更**: 「参考スコア」の表記を統一

#### 3.8 カメラ設定画面
- **追加**: 「プライバシー保護」セクションでオンデバイス処理を説明

#### 3.9 トレーニング実行画面
- **変更**: 「フォームスコア」→「参考スコア」に変更
- **追加**: 「表示されるスコアは参考情報です」の注意書きを常時表示
- **変更**: スコアが診断や判定ではなく、参考情報であることを明確化

#### 3.10 セッション結果画面
- **変更**: 「フォームスコア」→「参考スコア」に変更
- **追加**: 参考情報の説明を追加し、スコアの性質を明確化
- **追加**: 「最終的な判断はご自身で行ってください」の文言を追加

#### 3.11 履歴画面
- **変更**: 「フォームスコア」→「参考スコア」に統一
- **変更**: グラフのY軸ラベルを「参考スコア」に変更
- **変更**: 統計情報の「平均フォームスコア」を「平均参考スコア」に変更

#### 3.12 プロフィール画面
- **追加**: 「データ管理」セクション（GDPRデータポータビリティ権・削除権に対応）
- **追加**: データのダウンロード機能
- **追加**: データの削除機能

#### 3.13 設定画面
- **強化**: 「プライバシー設定」セクションを強化
- **追加**: 「データ処理の詳細」画面でオンデバイス処理を明示
- **追加**: 「同意の管理」画面で同意内容の確認・変更を可能に

#### 4. UI/UXガイドライン
- **追加**: 4.5「参考情報の表示ガイドライン」セクション
- **追加**: 参考情報表示の統一基準を定義

### v2.0（2025年11月）

#### 3.6 メニュー選択画面
- **追加**: 検索バー（種目名、カテゴリ、鍛える部位で検索）
- **追加**: フィルタボタン（すべて/部位/難易度）
- **変更**: カード表示に鍛える部位を簡易表示

#### 3.8 カメラ設定画面
- **変更**: カメラプレビューの枠線を骨格の支点（○）と線で表示

#### 3.9 トレーニング実行画面
- **追加**: YouTube風の進捗バー（残り回数/時間を%表示）
- **変更**: 骨格表示を支点（○）と線で表示

#### 3.10 セッション結果画面
- **削除**: 保存ボタン（自動保存に変更）
- **変更**: 他の画面に遷移時にメモを自動保存
- **変更**: フォームスコアを削除し、フォーム安定度を「スコア」として統一

#### 3.11 履歴画面
- **変更**: フォームスコアを削除し、フォーム安定度を「スコア」として統一表示

#### 3.3 ログイン画面（新規分離）
- **分離**: ログイン/新規登録を別画面に分離
- **変更**: メールアドレスまたは電話番号入力に対応
- **追加**: アカウント作成ボタン（新規登録画面へ）

#### 3.4 新規登録画面（新規追加）
- **新規**: 2ステップの登録フロー
- **ステップ1**: メールアドレス/電話番号、パスワード、名前
- **ステップ2**: 身長、体重、生年月日、目標

#### 3.5 利用規約同意画面
- **変更**: 利用規約とプライバシーポリシーの長文を追加
- **変更**: スクロール可能なテキスト表示

---

## まとめ

この画面設計により：

✅ **法的要件の遵守**: 利用規約v3.1・プライバシーポリシーv3.1と完全に整合
✅ **透明性の向上**: サービスの性質、制限事項、データ処理方法を明確に説明
✅ **プライバシー保護**: オンデバイス処理の明示、ユーザー権利の実装
✅ **用語の統一**: 「参考スコア」「参考情報」等の表現を完全統一
✅ **免責事項の適切な表示**: 医療機器でない旨、最終判断はユーザー自身である旨を明示
✅ **ユーザー権利の実装**: データダウンロード・削除機能の追加（GDPR準拠）
✅ **直感的な操作**: 最小限のタップ数で目的達成
✅ **検索・フィルタ機能**: 種目を簡単に見つけられる
✅ **視覚的なフィードバック**: 骨格の支点と線で姿勢を明示
✅ **進捗の可視化**: YouTube風の進捗バーで残り回数を表示
✅ **自動保存**: メモが失われない安心感
✅ **スコアの統一**: 参考スコアを唯一のスコアとして表示
✅ **段階的な登録**: 2ステップで負担を軽減

---

**次のステップ候補:**

- **開発タスク詳細 + スケジュール** を作成
- **5種目のフォーム判定ロジック詳細** を作成
- Claude Codeで実装を開始

どれにしましょうか?
