# é–‹ç™ºã‚¿ã‚¹ã‚¯è©³ç´° + ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« v3.1 (Part 1/4)

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: AIãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ã‚¢ãƒ—ãƒª(ä»®ç§°)  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.1  
**ä½œæˆæ—¥**: 2025å¹´11æœˆ22æ—¥  
**æœ€çµ‚æ›´æ–°æ—¥**: 2025å¹´11æœˆ22æ—¥  
**å¯¾è±¡æœŸé–“**: Phase 1-4 (0-12ãƒ¶æœˆ)

---

## ğŸ“‹ v3.1ã§ã®ä¸»ãªç‰¹å¾´

### å®Œå…¨æ€§ãƒ»æ•´åˆæ€§ã®ç¢ºä¿

âœ… **å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã®æ•´åˆæ€§**:
- è¦ä»¶å®šç¾©æ›¸v3.1ã®å…¨31æ©Ÿèƒ½è¦ä»¶ã«å¯¾å¿œ
- ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸v3.1ã®æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã«æº–æ‹ 
- åˆ©ç”¨è¦ç´„v3.1ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼v3.1ã®æ³•çš„è¦ä»¶ã‚’åæ˜ 
- Firestoreãƒ»BigQueryãƒ»APIè¨­è¨ˆæ›¸v3.1ã®è©³ç´°ä»•æ§˜ã«åŸºã¥ãå®Ÿè£…

âœ… **æ˜ç¢ºãªã‚¿ã‚¹ã‚¯å®šç¾©**:
- ã‚°ãƒ¬ãƒ¼ãªè¡¨ç¾ã‚’æ’é™¤ã—ã€å…·ä½“çš„ãªæˆæœç‰©ã‚’æ˜è¨˜
- å„ã‚¿ã‚¹ã‚¯ã«æ˜ç¢ºãªå®Œäº†æ¡ä»¶ã‚’è¨­å®š
- æ‹…å½“è€…ãƒ»å·¥æ•°ãƒ»å„ªå…ˆåº¦ã‚’æ˜ç¢ºåŒ–
- ä¾å­˜é–¢ä¿‚ã‚’å¯è¦–åŒ–

âœ… **ç¾å®Ÿçš„ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**:
- Claude Codeã®æ´»ç”¨ã‚’å‰æã¨ã—ãŸå·¥æ•°è¦‹ç©
- MVPé–‹ç™º(Phase 1-2: 0-4ãƒ¶æœˆ)ã‚’é‡è¦–
- æ®µéšçš„ãªæ©Ÿèƒ½è¿½åŠ (Phase 3-4: 4-12ãƒ¶æœˆ)
- ãƒªã‚¹ã‚¯ãƒãƒƒãƒ•ã‚¡ã‚’è€ƒæ…®

---

## ç›®æ¬¡

### Part 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦ãƒ»ç’°å¢ƒæ§‹ç¯‰
1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#1-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»](#2-ãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»)
3. [é–‹ç™ºç’°å¢ƒæ§‹ç¯‰](#3-é–‹ç™ºç’°å¢ƒæ§‹ç¯‰)

### Part 2: Phase 1 è©³ç´°ã‚¿ã‚¹ã‚¯
4. [Phase 1-1: åŸºç›¤æ§‹ç¯‰](#4-phase-1-1-åŸºç›¤æ§‹ç¯‰)
5. [Phase 1-2: èªè¨¼ãƒ»åŸºæœ¬UI](#5-phase-1-2-èªè¨¼åŸºæœ¬ui)
6. [Phase 1-3: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…](#6-phase-1-3-ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…)

### Part 3: Phase 2-3 è©³ç´°ã‚¿ã‚¹ã‚¯
7. [Phase 2-1: MVPå®Œæˆ](#7-phase-2-1-mvpå®Œæˆ)
8. [Phase 2-2: ãƒ†ã‚¹ãƒˆãƒ»æ”¹å–„](#8-phase-2-2-ãƒ†ã‚¹ãƒˆæ”¹å–„)
9. [Phase 3: MLæº–å‚™ãƒ»æ©Ÿèƒ½æ‹¡å¼µ](#9-phase-3-mlæº–å‚™æ©Ÿèƒ½æ‹¡å¼µ)

### Part 4: Phase 4ãƒ»é‹ç”¨ãƒ»ãƒªã‚¹ã‚¯ç®¡ç†
10. [Phase 4: MLå®Ÿè£…ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«](#10-phase-4-mlå®Ÿè£…ã‚¹ã‚±ãƒ¼ãƒ«)
11. [é‹ç”¨ãƒ»ä¿å®ˆã‚¿ã‚¹ã‚¯](#11-é‹ç”¨ä¿å®ˆã‚¿ã‚¹ã‚¯)
12. [ãƒªã‚¹ã‚¯ç®¡ç†ãƒ»å“è³ªä¿è¨¼](#12-ãƒªã‚¹ã‚¯ç®¡ç†å“è³ªä¿è¨¼)

---

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„

**ãƒ“ã‚¸ãƒ§ãƒ³**:
MediaPipe Poseã‚’æ´»ç”¨ã—ãŸãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªè£œåŠ©æ©Ÿèƒ½ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®‰å…¨ã§åŠ¹æœçš„ãªãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è‡ªå®…ã§å®Ÿæ–½ã§ãã‚‹ã‚ˆã†ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã€‚

**é‡è¦ãªä½ç½®ã¥ã‘**(è¦ä»¶å®šç¾©æ›¸v3.1ç¬¬1.2.2é …):
- æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã¯**åŒ»ç™‚æ©Ÿå™¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“**
- æä¾›ã™ã‚‹æƒ…å ±ã¯**å‚è€ƒæƒ…å ±**ã§ã™
- **è¨ºæ–­ãƒ»æ²»ç™‚ãƒ»äºˆé˜²ã‚’ç›®çš„ã¨ã—ã¾ã›ã‚“**
- æœ€çµ‚åˆ¤æ–­ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªèº«ã®è²¬ä»»ã«ãŠã„ã¦è¡Œã„ã¾ã™

### 1.2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ã‚³ãƒ¼ãƒ—

#### 1.2.1 å¯¾è±¡ç¯„å›²

| é …ç›® | å†…å®¹ |
|-----|------|
| **å¯¾è±¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ** | iOS 14+, Android 10+ |
| **å¯¾å¿œç¨®ç›®** | Phase 1-2: 5ç¨®ç›®<br>Phase 3-4: è¿½åŠ ç¨®ç›®æ¤œè¨ |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤** | 18æ­³ä»¥ä¸Šã®å¥åº·ãªå€‹äºº |
| **è¨€èª** | æ—¥æœ¬èªã®ã¿(MVP) |
| **åœ°åŸŸ** | æ—¥æœ¬å›½å†…(MVP) |

#### 1.2.2 å¯¾è±¡å¤–

| é …ç›® | ç†ç”± |
|-----|------|
| **åŒ»ç™‚æ©Ÿå™¨ã¨ã—ã¦ã®æ©Ÿèƒ½** | è–¬æ©Ÿæ³•ä¸Šã®åˆ¶ç´„ |
| **ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã•ã‚ŒãŸãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒ³** | Phase 5ä»¥é™ |
| **SNSæ©Ÿèƒ½** | Phase 5ä»¥é™ |
| **å¤šè¨€èªå¯¾å¿œ** | Phase 5ä»¥é™ |
| **Webç‰ˆ** | ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆæˆ¦ç•¥ |

### 1.3 æˆåŠŸæŒ‡æ¨™(KPI)

#### 1.3.1 Phase 1-2 (MVPæœŸé–“: 0-4ãƒ¶æœˆ)

| KPI | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|-----|--------|---------|
| **ã‚¢ãƒ—ãƒªãƒªãƒªãƒ¼ã‚¹** | 4ãƒ¶æœˆä»¥å†… | ãƒªãƒªãƒ¼ã‚¹æ—¥ |
| **ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼** | 100äºº/æœˆ | Firebase Analytics |
| **ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³** | 500ã‚»ãƒƒã‚·ãƒ§ãƒ³/æœˆ | Firestore |
| **ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ•ãƒªãƒ¼ç‡** | 99%ä»¥ä¸Š | Firebase Crashlytics |
| **å¹³å‡ã‚»ãƒƒã‚·ãƒ§ãƒ³æ™‚é–“** | 10åˆ†ä»¥ä¸Š | Firebase Analytics |

#### 1.3.2 Phase 3-4 (æˆé•·æœŸ: 4-12ãƒ¶æœˆ)

| KPI | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|-----|--------|---------|
| **ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼** | 1,000äºº/æœˆ | Firebase Analytics |
| **æœ‰æ–™ãƒ—ãƒ©ãƒ³è»¢æ›ç‡** | 5%ä»¥ä¸Š | RevenueCat |
| **ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³** | 10,000ã‚»ãƒƒã‚·ãƒ§ãƒ³/æœˆ | BigQuery |
| **MLãƒ¢ãƒ‡ãƒ«ç²¾åº¦** | 80%ä»¥ä¸Š | Vertex AIè©•ä¾¡ |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦** | 4.0ä»¥ä¸Š(5ç‚¹æº€ç‚¹) | ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢ãƒ¬ãƒ“ãƒ¥ãƒ¼ |

### 1.4 å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ä¸»ãªå‚ç…§ç®‡æ‰€ |
|------------|----------|------------|
| **è¦ä»¶å®šç¾©æ›¸** | v3.1 | å…¨ä½“ã€ç‰¹ã«ç¬¬3ç« (æ©Ÿèƒ½è¦ä»¶) |
| **ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸** | v3.1 | å…¨ä½“ã€ç‰¹ã«ç¬¬2ç« (æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯) |
| **Firestoreãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸** | v3.1 | ç¬¬3-4ç« (ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«) |
| **BigQueryè¨­è¨ˆæ›¸** | v3.1 | ç¬¬3-4ç« (ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ) |
| **APIè¨­è¨ˆæ›¸(Firebase Functions)** | v3.1 | ç¬¬3-6ç« (ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå®šç¾©) |
| **ç”»é¢é·ç§»å›³+ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ** | v3.1 | å…¨ä½“ |
| **5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°** | v3.1 | å…¨ä½“ |
| **åˆ©ç”¨è¦ç´„** | v3.1 | å…¨ä½“ |
| **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼** | v3.1 | å…¨ä½“ |
| **ãƒ‡ãƒ¼ã‚¿å‡¦ç†è¨˜éŒ²(ROPA)** | v1.0 | å…¨ä½“ |

---

## 2. ãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»

### 2.1 å…¨ä½“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

```
Phase 1: åŸºç›¤æ§‹ç¯‰ (0-1ãƒ¶æœˆ)
â”œâ”€ Week 1-2: ç’°å¢ƒæ§‹ç¯‰ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
â””â”€ Week 3-4: èªè¨¼ãƒ»åŸºæœ¬UIãƒ»ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…

Phase 2: MVPå®Œæˆ (1-4ãƒ¶æœˆ)
â”œâ”€ Month 2: 5ç¨®ç›®å®Ÿè£…ãƒ»ãƒ‡ãƒ¼ã‚¿åé›†åŸºç›¤
â”œâ”€ Month 3: èª²é‡‘ãƒ»GDPRå¯¾å¿œãƒ»UIæ”¹å–„
â””â”€ Month 4: ãƒ†ã‚¹ãƒˆãƒ»ãƒã‚°ä¿®æ­£ãƒ»ãƒªãƒªãƒ¼ã‚¹æº–å‚™

Phase 3: MLæº–å‚™ãƒ»æ©Ÿèƒ½æ‹¡å¼µ (4-8ãƒ¶æœˆ)
â”œâ”€ Month 5-6: ãƒ‡ãƒ¼ã‚¿åé›†(ç›®æ¨™: 10,000ã‚»ãƒƒã‚·ãƒ§ãƒ³)
â””â”€ Month 7-8: MLãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ§‹ç¯‰ãƒ»è¿½åŠ æ©Ÿèƒ½

Phase 4: MLå®Ÿè£…ãƒ»ã‚¹ã‚±ãƒ¼ãƒ« (8-12ãƒ¶æœˆ)
â”œâ”€ Month 9-10: MLãƒ¢ãƒ‡ãƒ«è¨“ç·´ãƒ»è©•ä¾¡
â””â”€ Month 11-12: MLãƒ¢ãƒ‡ãƒ«ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„
```

### 2.2 ãƒ•ã‚§ãƒ¼ã‚ºã”ã¨ã®ä¸»è¦ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

#### Phase 1: åŸºç›¤æ§‹ç¯‰ (0-1ãƒ¶æœˆ)

| ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | æœŸé™ | æˆæœç‰© |
|-------------|------|-------|
| **M1.1: ç’°å¢ƒæ§‹ç¯‰å®Œäº†** | Week 1 | é–‹ç™ºç’°å¢ƒã€CI/CDã€Firebase/GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| **M1.2: èªè¨¼å®Ÿè£…å®Œäº†** | Week 2 | Firebase Authenticationçµ±åˆ |
| **M1.3: åŸºæœ¬UIå®Œæˆ** | Week 3 | ãƒ›ãƒ¼ãƒ ãƒ»è¨­å®šãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ |
| **M1.4: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…** | Week 4 | MediaPipeçµ±åˆã€1ç¨®ç›®ã®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèª |

#### Phase 2: MVPå®Œæˆ (1-4ãƒ¶æœˆ)

| ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | æœŸé™ | æˆæœç‰© |
|-------------|------|-------|
| **M2.1: 5ç¨®ç›®å®Ÿè£…å®Œäº†** | Month 2 | å…¨5ç¨®ç›®ã®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯ |
| **M2.2: ãƒ‡ãƒ¼ã‚¿åé›†åŸºç›¤** | Month 2 | Firestore/BigQueryé€£æº |
| **M2.3: èª²é‡‘æ©Ÿèƒ½å®Ÿè£…** | Month 3 | RevenueCatçµ±åˆã€ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ |
| **M2.4: GDPRå¯¾å¿œå®Œäº†** | Month 3 | ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»å‰Šé™¤API |
| **M2.5: ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰Î²é–‹å§‹** | Month 3æœ« | TestFlightã§ã®é…ä¿¡ |
| **M2.6: MVPãƒªãƒªãƒ¼ã‚¹** | Month 4 | App Store/Google Playå…¬é–‹ |

#### Phase 3: MLæº–å‚™ãƒ»æ©Ÿèƒ½æ‹¡å¼µ (4-8ãƒ¶æœˆ)

| ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | æœŸé™ | æˆæœç‰© |
|-------------|------|-------|
| **M3.1: ãƒ‡ãƒ¼ã‚¿åé›†é”æˆ** | Month 6 | 10,000ã‚»ãƒƒã‚·ãƒ§ãƒ³åé›† |
| **M3.2: MLãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ§‹ç¯‰** | Month 7 | BigQueryã§ã®ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚° |
| **M3.3: UI/UXæ”¹å–„** | Month 8 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åæ˜  |

#### Phase 4: MLå®Ÿè£…ãƒ»ã‚¹ã‚±ãƒ¼ãƒ« (8-12ãƒ¶æœˆ)

| ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | æœŸé™ | æˆæœç‰© |
|-------------|------|-------|
| **M4.1: MLãƒ¢ãƒ‡ãƒ«è¨“ç·´** | Month 10 | åˆæœŸãƒ¢ãƒ‡ãƒ«(ç²¾åº¦80%+) |
| **M4.2: MLãƒ¢ãƒ‡ãƒ«ãƒ‡ãƒ—ãƒ­ã‚¤** | Month 11 | Vertex AIã§ã®æœ¬ç•ªé‹ç”¨ |
| **M4.3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–** | Month 12 | å¿œç­”æ™‚é–“5ç§’ä»¥å†…é”æˆ |

### 2.3 ãƒãƒ¼ãƒ æ§‹æˆ

| å½¹å‰² | äººæ•° | ä¸»ãªè²¬å‹™ |
|-----|------|---------|
| **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼** | 1å | å…¨ä½“é€²æ—ç®¡ç†ã€æ„æ€æ±ºå®š |
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢** | 1å | React Nativeé–‹ç™ºã€UI/UXå®Ÿè£… |
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢** | 1å | Firebase/GCPæ§‹ç¯‰ã€APIé–‹ç™º |
| **MLã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢** | 1å(Phase 3ä»¥é™) | MLãƒ¢ãƒ‡ãƒ«é–‹ç™ºã€ãƒ‡ãƒ¼ã‚¿åˆ†æ |
| **QAã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢** | 0.5å | ãƒ†ã‚¹ãƒˆã€å“è³ªä¿è¨¼ |
| **ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼** | 0.5å | UI/UXãƒ‡ã‚¶ã‚¤ãƒ³ |
| **æ³•å‹™æ‹…å½“** | å¤–éƒ¨ç›¸è«‡ | åˆ©ç”¨è¦ç´„ã€GDPRå¯¾å¿œãƒ¬ãƒ“ãƒ¥ãƒ¼ |

**åˆè¨ˆ**: 4-5å(Phase 1-2)ã€5-6å(Phase 3-4)

### 2.4 Claude Codeã®æ´»ç”¨æˆ¦ç•¥

#### 2.4.1 æ´»ç”¨ç¯„å›²

| ä½œæ¥­ç¨®åˆ¥ | Claude Codeæ´»ç”¨åº¦ | æœŸå¾…åŠ¹æœ |
|---------|------------------|---------|
| **å®šå‹ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ** | é«˜(80%) | èªè¨¼ã€CRUDã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| **APIå®Ÿè£…** | é«˜(70%) | Firebase Functionsã€RESTful API |
| **ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…** | ä¸­(50%) | ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯ã€çŠ¶æ…‹ç®¡ç† |
| **UIå®Ÿè£…** | ä¸­(40%) | React Nativeã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ |
| **ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰** | é«˜(70%) | å˜ä½“ãƒ†ã‚¹ãƒˆã€çµ±åˆãƒ†ã‚¹ãƒˆ |
| **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ** | é«˜(90%) | READMEã€ã‚³ãƒ¡ãƒ³ãƒˆã€å‹å®šç¾© |

#### 2.4.2 æœŸå¾…ã•ã‚Œã‚‹åŠ¹ç‡åŒ–

- **é–‹ç™ºé€Ÿåº¦**: é€šå¸¸ã®1.5-2å€
- **ã‚³ãƒ¼ãƒ‰å“è³ª**: ä¸€è²«æ€§å‘ä¸Šã€ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹é©ç”¨
- **ãƒã‚°å‰Šæ¸›**: å‹å®‰å…¨æ€§ã€ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å¯¾å¿œ
- **å­¦ç¿’æ›²ç·š**: æ–°æŠ€è¡“ç¿’å¾—ã®çŸ­ç¸®

---

## 3. é–‹ç™ºç’°å¢ƒæ§‹ç¯‰

### 3.1 ã‚¿ã‚¹ã‚¯ä¸€è¦§

#### 3.1.1 ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|---------|
| **ENV-001** | Node.jsç’°å¢ƒæ§‹ç¯‰ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | é«˜ | Node.js 20 LTSã€npm 10+ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª |
| **ENV-002** | React Nativeç’°å¢ƒæ§‹ç¯‰ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | iOS/Androidã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿èµ·å‹•ç¢ºèª |
| **ENV-003** | Git/GitHubã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— | å…¨å“¡ | 0.5æ—¥ | é«˜ | ãƒªãƒã‚¸ãƒˆãƒªä½œæˆã€ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ç¢ºç«‹ |
| **ENV-004** | IDEã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— | å…¨å“¡ | 0.5æ—¥ | ä¸­ | VS Code + æ¨å¥¨æ‹¡å¼µæ©Ÿèƒ½ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
| **ENV-005** | Linter/Formatterè¨­å®š | å…¨å“¡ | 0.5æ—¥ | ä¸­ | ESLintã€Prettierè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ |

**ENV-001è©³ç´°: Node.jsç’°å¢ƒæ§‹ç¯‰**

```bash
# Node.jsã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«(nvmä½¿ç”¨æ¨å¥¨)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 20
nvm use 20
node --version  # v20.x.xç¢ºèª

# npmæ›´æ–°
npm install -g npm@latest
npm --version  # 10.x.xç¢ºèª

# ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ„ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g typescript@5.3.0
npm install -g firebase-tools@13.0.0
npm install -g @google-cloud/cli
```

**å®Œäº†æ¡ä»¶**:
- [ ] Node.js 20.x.xã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
- [ ] npm 10.x.xã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
- [ ] TypeScriptã€Firebase Toolsã€gcloudã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œç¢ºèª

---

**ENV-002è©³ç´°: React Nativeç’°å¢ƒæ§‹ç¯‰**

```bash
# React Native CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g react-native-cli

# iOSé–‹ç™ºç’°å¢ƒ(macOS)
xcode-select --install
sudo gem install cocoapods

# Androidé–‹ç™ºç’°å¢ƒ
# Android Studioã€Android SDKã€Java JDK 17ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# ANDROID_HOMEç’°å¢ƒå¤‰æ•°è¨­å®š

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
npx react-native@latest init AIFitnessApp --version 0.73.0
cd AIFitnessApp

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# iOSã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿èµ·å‹•ç¢ºèª
npx react-native run-ios

# Androidã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿èµ·å‹•ç¢ºèª
npx react-native run-android
```

**å®Œäº†æ¡ä»¶**:
- [ ] Xcodeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª(macOS)
- [ ] Android Studioã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
- [ ] iOSã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ã‚¢ãƒ—ãƒªèµ·å‹•ç¢ºèª
- [ ] Androidã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ã‚¢ãƒ—ãƒªèµ·å‹•ç¢ºèª

---

**ENV-003è©³ç´°: Git/GitHubã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

```bash
# ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ
gh repo create ai-fitness-app --private

# ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/[organization]/ai-fitness-app.git
cd ai-fitness-app

# .gitignoreä½œæˆ
cat > .gitignore << EOF
# Node
node_modules/
npm-debug.log

# React Native
.expo/
.expo-shared/

# iOS
ios/Pods/
ios/build/
*.pbxuser
*.mode1v3

# Android
android/app/build/
android/.gradle/
local.properties

# IDE
.vscode/
.idea/

# Environment
.env
.env.local

# Firebase
firebase-debug.log
firestore-debug.log

# macOS
.DS_Store
EOF

# ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥
git checkout -b develop
git push -u origin develop
```

**ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥**:
- `main`: æœ¬ç•ªç’°å¢ƒã€ã‚¿ã‚°ã§ãƒªãƒªãƒ¼ã‚¹ç®¡ç†
- `develop`: é–‹ç™ºç’°å¢ƒã€ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒçµ±åˆã•ã‚Œã‚‹
- `feature/*`: æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã€developã‹ã‚‰åˆ†å²
- `hotfix/*`: ç·Šæ€¥ä¿®æ­£ã€mainã‹ã‚‰åˆ†å²

**å®Œäº†æ¡ä»¶**:
- [ ] GitHubãƒªãƒã‚¸ãƒˆãƒªä½œæˆç¢ºèª
- [ ] .gitignoreè¨­å®šç¢ºèª
- [ ] ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
- [ ] README.mdåˆæœŸç‰ˆä½œæˆ

---

**ENV-004è©³ç´°: IDEã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

**æ¨å¥¨æ‹¡å¼µæ©Ÿèƒ½(VS Code)**:

```json
// .vscode/extensions.json
{
  "recommendations": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-typescript-next",
    "bradlc.vscode-tailwindcss",
    "firebase.vscode-firebase",
    "msjsdiag.vscode-react-native",
    "christian-kohler.path-intellisense",
    "formulahendry.auto-rename-tag",
    "streetsidesoftware.code-spell-checker"
  ]
}
```

**VS Codeè¨­å®š**:

```json
// .vscode/settings.json
{
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "typescript.tsdk": "node_modules/typescript/lib",
  "files.associations": {
    "*.css": "tailwindcss"
  }
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] VS Codeã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
- [ ] æ¨å¥¨æ‹¡å¼µæ©Ÿèƒ½ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
- [ ] settings.jsonè¨­å®šç¢ºèª
- [ ] TypeScriptã‚¨ãƒ©ãƒ¼è¡¨ç¤ºç¢ºèª

---

**ENV-005è©³ç´°: Linter/Formatterè¨­å®š**

**ESLintè¨­å®š**:

```bash
npm install --save-dev eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
npm install --save-dev eslint-plugin-react eslint-plugin-react-hooks
npm install --save-dev eslint-plugin-react-native
```

```javascript
// .eslintrc.js
module.exports = {
  root: true,
  extends: [
    '@react-native',
    'plugin:@typescript-eslint/recommended',
    'plugin:react-hooks/recommended',
  ],
  parser: '@typescript-eslint/parser',
  plugins: ['@typescript-eslint', 'react-native'],
  rules: {
    'react-native/no-unused-styles': 'error',
    'react-native/split-platform-components': 'error',
    '@typescript-eslint/no-unused-vars': 'error',
    '@typescript-eslint/explicit-module-boundary-types': 'off',
  },
};
```

**Prettierè¨­å®š**:

```bash
npm install --save-dev prettier
```

```json
// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 100,
  "tabWidth": 2,
  "arrowParens": "avoid"
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] ESLintè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] Prettierè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] `npm run lint`ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œç¢ºèª
- [ ] ä¿å­˜æ™‚ã®è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç¢ºèª

---

#### 3.1.2 Firebase/GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹ç¯‰

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|---------|
| **FIRE-001** | Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | é«˜ | æœ¬ç•ªãƒ»é–‹ç™ºç’°å¢ƒä½œæˆã€æ–™é‡‘ãƒ—ãƒ©ãƒ³è¨­å®š |
| **FIRE-002** | Firebase Authenticationè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | é«˜ | Email/Google/Appleèªè¨¼æœ‰åŠ¹åŒ– |
| **FIRE-003** | Firestoreè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆã€Security RulesåˆæœŸè¨­å®š |
| **FIRE-004** | Firebase Storageè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | ä¸­ | ãƒã‚±ãƒƒãƒˆä½œæˆã€Security Rulesè¨­å®š |
| **FIRE-005** | Firebase Functionsè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–ã€TypeScriptè¨­å®š |
| **FIRE-006** | Firebase Analyticsè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | ä¸­ | Google Analyticsçµ±åˆ |
| **FIRE-007** | Firebase Crashlyticsè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | ä¸­ | ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆè¨­å®š |
| **GCP-001** | GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | é«˜ | Firebaseã¨åŒä¸€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç¢ºèª |
| **GCP-002** | BigQueryè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä½œæˆã€IAMè¨­å®š |
| **GCP-003** | Cloud Functionsè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | ä¸­ | ãƒªãƒ¼ã‚¸ãƒ§ãƒ³è¨­å®šã€IAMè¨­å®š |
| **GCP-004** | Cloud Schedulerè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | ä¸­ | ãƒãƒƒãƒã‚¸ãƒ§ãƒ–è¨­å®š |
| **GCP-005** | Cloud Loggingè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | ä¸­ | ãƒ­ã‚°ä¿å­˜è¨­å®šã€ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š |

**FIRE-001è©³ç´°: Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ**

```bash
# Firebase CLIãƒ­ã‚°ã‚¤ãƒ³
firebase login

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ(Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿæ–½)
# æœ¬ç•ªç’°å¢ƒ: ai-fitness-app-prod
# é–‹ç™ºç’°å¢ƒ: ai-fitness-app-dev

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé¸æŠ
firebase use --add
# > ai-fitness-app-dev (é–‹ç™º)
# > ai-fitness-app-prod (æœ¬ç•ª)

# æ–™é‡‘ãƒ—ãƒ©ãƒ³è¨­å®š
# Blaze ãƒ—ãƒ©ãƒ³(å¾“é‡èª²é‡‘)ã«è¨­å®š
# ç„¡æ–™æ ã‚ã‚Šã€è¶…éåˆ†ã®ã¿èª²é‡‘
```

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ**:

| ç’°å¢ƒ | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID | ç”¨é€” |
|-----|--------------|------|
| **é–‹ç™º** | ai-fitness-app-dev | é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ |
| **æœ¬ç•ª** | ai-fitness-app-prod | æœ¬ç•ªé‹ç”¨ |

**å®Œäº†æ¡ä»¶**:
- [ ] Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§2ã¤ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç¢ºèª
- [ ] Blazeãƒ—ãƒ©ãƒ³ã¸ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å®Œäº†
- [ ] firebase useã‚³ãƒãƒ³ãƒ‰ã§ç’°å¢ƒåˆ‡ã‚Šæ›¿ãˆç¢ºèª

---

**FIRE-002è©³ç´°: Firebase Authenticationè¨­å®š**

```bash
# Firebaseã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ä»¥ä¸‹ã‚’æœ‰åŠ¹åŒ–
# 1. ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
# 2. Googleèªè¨¼
# 3. Appleèªè¨¼(iOS)

# èªè¨¼ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­å®š
# - ç¢ºèªãƒ¡ãƒ¼ãƒ«
# - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ
```

**èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¨­å®š**:

| ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ | è¨­å®šå†…å®¹ |
|------------|---------|
| **Email/Password** | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆURLè¨­å®š |
| **Google** | OAuth2.0ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDè¨­å®š |
| **Apple** | Sign in with Appleè¨­å®š |

**å®Œäº†æ¡ä»¶**:
- [ ] 3ã¤ã®èªè¨¼ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æœ‰åŠ¹åŒ–ç¢ºèª
- [ ] èªè¨¼ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­å®šç¢ºèª
- [ ] ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãƒ»ãƒ­ã‚°ã‚¤ãƒ³ç¢ºèª

---

**FIRE-003è©³ç´°: Firestoreè¨­å®š**

```bash
# Firestoreãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ
# ãƒªãƒ¼ã‚¸ãƒ§ãƒ³: asia-northeast1 (æ±äº¬)
# ãƒ¢ãƒ¼ãƒ‰: Native Mode

# Security RulesåˆæœŸè¨­å®š
firebase deploy --only firestore:rules

# ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
firebase deploy --only firestore:indexes
```

**åˆæœŸSecurity Rules** (firestore.rules):

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯å…¨æ‹’å¦
    match /{document=**} {
      allow read, write: if false;
    }
    
    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚‚åŒæ§˜
    match /training_sessions/{sessionId} {
      allow read, write: if request.auth != null && 
                            resource.data.userId == request.auth.uid;
    }
  }
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] Firestoreãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆç¢ºèª
- [ ] Security Rulesãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª
- [ ] Firestoreã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºç¢ºèª

---

(Part 1 ç¶šã - æ¬¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¸)
# é–‹ç™ºã‚¿ã‚¹ã‚¯è©³ç´° + ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« v3.1 (Part 2/4)

## 4. Phase 1-1: åŸºç›¤æ§‹ç¯‰

**æœŸé–“**: Week 1-2  
**ç›®æ¨™**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åŸºç¤ã‚’æ§‹ç¯‰ã—ã€é–‹ç™ºã‚’é–‹å§‹ã§ãã‚‹çŠ¶æ…‹ã«ã™ã‚‹

### 4.1 React Nativeãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **RN-001** | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ– | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | é«˜ | ENV-002 | React Native 0.73ã‚¢ãƒ—ãƒªèµ·å‹•ç¢ºèª |
| **RN-002** | ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | RN-001 | package.jsonè¨˜è¼‰ã®å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
| **RN-003** | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | é«˜ | RN-001 | ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œæˆ |
| **RN-004** | TypeScriptè¨­å®š | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | é«˜ | RN-001 | tsconfig.jsonè¨­å®šã€å‹ã‚¨ãƒ©ãƒ¼0ä»¶ |
| **RN-005** | React Navigationçµ±åˆ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | RN-002 | ç”»é¢é·ç§»ã®åŸºæœ¬å‹•ä½œç¢ºèª |

**RN-002è©³ç´°: ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```json
// package.json
{
  "name": "AIFitnessApp",
  "version": "1.0.0",
  "dependencies": {
    "react": "18.2.0",
    "react-native": "0.73.0",
    
    // Navigation
    "@react-navigation/native": "^6.1.9",
    "@react-navigation/stack": "^6.3.20",
    "@react-navigation/bottom-tabs": "^6.5.11",
    "react-native-screens": "^3.29.0",
    "react-native-safe-area-context": "^4.8.2",
    "react-native-gesture-handler": "^2.14.1",
    
    // State Management
    "zustand": "^4.5.0",
    "immer": "^10.0.3",
    
    // Firebase
    "@react-native-firebase/app": "^19.0.0",
    "@react-native-firebase/auth": "^19.0.0",
    "@react-native-firebase/firestore": "^19.0.0",
    "@react-native-firebase/analytics": "^19.0.0",
    "@react-native-firebase/crashlytics": "^19.0.0",
    
    // UI Components
    "react-native-vector-icons": "^10.0.3",
    "react-native-linear-gradient": "^2.8.3",
    
    // Camera & ML
    "react-native-vision-camera": "^4.5.0",
    "@mediapipe/pose": "^0.5.1675469404",
    
    // Local Storage
    "@react-native-async-storage/async-storage": "^1.21.0",
    "react-native-mmkv": "^2.11.0",
    
    // Others
    "react-native-date-picker": "^5.0.0",
    "react-native-toast-message": "^2.2.0",
    "react-native-sound": "^0.11.2"
  },
  "devDependencies": {
    "@types/react": "^18.2.45",
    "@types/react-native": "^0.73.0",
    "@typescript-eslint/eslint-plugin": "^6.16.0",
    "@typescript-eslint/parser": "^6.16.0",
    "eslint": "^8.56.0",
    "prettier": "^3.1.1",
    "typescript": "^5.3.3",
    "jest": "^29.7.0",
    "@testing-library/react-native": "^12.4.2"
  }
}
```

**ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚³ãƒãƒ³ãƒ‰**:

```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# iOSä¾å­˜é–¢ä¿‚(macOS)
cd ios && pod install && cd ..

# Androidä¾å­˜é–¢ä¿‚
cd android && ./gradlew clean && cd ..
```

**å®Œäº†æ¡ä»¶**:
- [ ] `npm install`ã‚¨ãƒ©ãƒ¼ãªã—
- [ ] `pod install`æˆåŠŸ(iOS)
- [ ] ãƒ“ãƒ«ãƒ‰æˆåŠŸ(iOS/Android)
- [ ] èµ·å‹•ç¢ºèª

---

**RN-003è©³ç´°: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆ**

```
src/
â”œâ”€â”€ components/          # å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ common/         # ãƒœã‚¿ãƒ³ã€ã‚¤ãƒ³ãƒ—ãƒƒãƒˆç­‰
â”‚   â”œâ”€â”€ training/       # ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°é–¢é€£
â”‚   â””â”€â”€ navigation/     # ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é–¢é€£
â”œâ”€â”€ screens/            # ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ auth/          # èªè¨¼ç”»é¢
â”‚   â”œâ”€â”€ home/          # ãƒ›ãƒ¼ãƒ ç”»é¢
â”‚   â”œâ”€â”€ training/      # ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç”»é¢
â”‚   â”œâ”€â”€ history/       # å±¥æ­´ç”»é¢
â”‚   â””â”€â”€ settings/      # è¨­å®šç”»é¢
â”œâ”€â”€ navigation/         # ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”œâ”€â”€ store/             # ZustandçŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ authStore.ts
â”‚   â”œâ”€â”€ trainingStore.ts
â”‚   â””â”€â”€ settingsStore.ts
â”œâ”€â”€ services/          # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ firebase/      # Firebaseé–¢é€£
â”‚   â”œâ”€â”€ ml/           # MediaPipeé–¢é€£
â”‚   â””â”€â”€ analytics/     # Analyticsé–¢é€£
â”œâ”€â”€ utils/            # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”œâ”€â”€ constants.ts
â”‚   â”œâ”€â”€ validators.ts
â”‚   â””â”€â”€ formatters.ts
â”œâ”€â”€ types/            # TypeScriptå‹å®šç¾©
â”‚   â”œâ”€â”€ models.ts
â”‚   â”œâ”€â”€ api.ts
â”‚   â””â”€â”€ navigation.ts
â”œâ”€â”€ assets/           # ç”»åƒã€éŸ³å£°ç­‰
â”‚   â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ sounds/
â”‚   â””â”€â”€ videos/
â””â”€â”€ hooks/            # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
    â”œâ”€â”€ useAuth.ts
    â”œâ”€â”€ useTraining.ts
    â””â”€â”€ useAnalytics.ts
```

**å®Œäº†æ¡ä»¶**:
- [ ] ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ä½œæˆå®Œäº†
- [ ] å„ãƒ•ã‚©ãƒ«ãƒ€ã«README.mdä½œæˆ
- [ ] index.tsã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®š

---

**RN-004è©³ç´°: TypeScriptè¨­å®š**

```json
// tsconfig.json
{
  "extends": "@react-native/typescript-config/tsconfig.json",
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020"],
    "jsx": "react-native",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@screens/*": ["src/screens/*"],
      "@services/*": ["src/services/*"],
      "@utils/*": ["src/utils/*"],
      "@types/*": ["src/types/*"],
      "@hooks/*": ["src/hooks/*"],
      "@store/*": ["src/store/*"]
    }
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "babel.config.js", "metro.config.js"]
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] tsconfig.jsonè¨­å®šå®Œäº†
- [ ] ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹å‹•ä½œç¢ºèª
- [ ] TypeScriptã‚¨ãƒ©ãƒ¼0ä»¶
- [ ] VS Codeã§å‹ãƒã‚§ãƒƒã‚¯å‹•ä½œç¢ºèª

---

**RN-005è©³ç´°: React Navigationçµ±åˆ**

```typescript
// src/navigation/RootNavigator.tsx
import React from 'react';
import { NavigationContainer } from '@react-navigation/native';
import { createStackNavigator } from '@react-navigation/stack';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';

import { RootStackParamList, MainTabParamList } from '@types/navigation';

// Screens
import LoginScreen from '@screens/auth/LoginScreen';
import HomeScreen from '@screens/home/HomeScreen';
import TrainingScreen from '@screens/training/TrainingScreen';
import HistoryScreen from '@screens/history/HistoryScreen';
import SettingsScreen from '@screens/settings/SettingsScreen';

const Stack = createStackNavigator<RootStackParamList>();
const Tab = createBottomTabNavigator<MainTabParamList>();

// ãƒ¡ã‚¤ãƒ³ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼
function MainTabs() {
  return (
    <Tab.Navigator>
      <Tab.Screen name="Home" component={HomeScreen} />
      <Tab.Screen name="Training" component={TrainingScreen} />
      <Tab.Screen name="History" component={HistoryScreen} />
      <Tab.Screen name="Settings" component={SettingsScreen} />
    </Tab.Navigator>
  );
}

// ãƒ«ãƒ¼ãƒˆãƒŠãƒ“ã‚²ãƒ¼ã‚¿ãƒ¼
export default function RootNavigator() {
  const isAuthenticated = false; // TODO: èªè¨¼çŠ¶æ…‹å–å¾—

  return (
    <NavigationContainer>
      <Stack.Navigator screenOptions={{ headerShown: false }}>
        {!isAuthenticated ? (
          <Stack.Screen name="Login" component={LoginScreen} />
        ) : (
          <Stack.Screen name="Main" component={MainTabs} />
        )}
      </Stack.Navigator>
    </NavigationContainer>
  );
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ§‹é€ å®Ÿè£…
- [ ] ç”»é¢é·ç§»å‹•ä½œç¢ºèª
- [ ] ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å‹•ä½œç¢ºèª
- [ ] å‹å®šç¾©å®Œäº†

---

### 4.2 Firebase SDKçµ±åˆ

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **SDK-001** | Firebase iOSè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | FIRE-001 | GoogleService-Info.plistè¨­å®šå®Œäº† |
| **SDK-002** | Firebase Androidè¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | FIRE-001 | google-services.jsonè¨­å®šå®Œäº† |
| **SDK-003** | FirebaseåˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | é«˜ | SDK-001,002 | Firebaseæ¥ç¶šç¢ºèª |
| **SDK-004** | Firestore SDKçµ±åˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | SDK-003 | CRUDæ“ä½œç¢ºèª |
| **SDK-005** | Analytics SDKçµ±åˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 0.5æ—¥ | ä¸­ | SDK-003 | ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ç¢ºèª |

**SDK-001è©³ç´°: Firebase iOSè¨­å®š**

```bash
# 1. Firebase Consoleã‹ã‚‰ GoogleService-Info.plist ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# 2. ios/AIFitnessApp/ ã«ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®
# 3. Xcodeã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ 

# Podfileä¿®æ­£
cd ios
```

```ruby
# ios/Podfile
platform :ios, '14.0'
require_relative '../node_modules/react-native/scripts/react_native_pods'
require_relative '../node_modules/@react-native-community/cli-platform-ios/native_modules'

target 'AIFitnessApp' do
  config = use_native_modules!
  use_react_native!(:path => config[:reactNativePath])

  # Firebase
  pod 'Firebase/Analytics'
  pod 'Firebase/Auth'
  pod 'Firebase/Firestore'
  pod 'Firebase/Crashlytics'

  target 'AIFitnessAppTests' do
    inherit! :complete
  end

  post_install do |installer|
    react_native_post_install(installer)
  end
end
```

```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pod install
```

**å®Œäº†æ¡ä»¶**:
- [ ] GoogleService-Info.plisté…ç½®ç¢ºèª
- [ ] pod installæˆåŠŸ
- [ ] ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- [ ] FirebaseåˆæœŸåŒ–æˆåŠŸ

---

**SDK-002è©³ç´°: Firebase Androidè¨­å®š**

```bash
# 1. Firebase Consoleã‹ã‚‰ google-services.json ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# 2. android/app/ ã«ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®
```

```gradle
// android/build.gradle
buildscript {
    ext {
        buildToolsVersion = "34.0.0"
        minSdkVersion = 23
        compileSdkVersion = 34
        targetSdkVersion = 34
    }
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        classpath("com.android.tools.build:gradle")
        classpath("com.facebook.react:react-native-gradle-plugin")
        classpath("com.google.gms:google-services:4.4.0")
    }
}
```

```gradle
// android/app/build.gradle
apply plugin: "com.android.application"
apply plugin: "com.google.gms.google-services"

android {
    // ... æ—¢å­˜è¨­å®š
}

dependencies {
    implementation platform('com.google.firebase:firebase-bom:32.7.0')
    implementation 'com.google.firebase:firebase-analytics'
    implementation 'com.google.firebase:firebase-auth'
    implementation 'com.google.firebase:firebase-firestore'
    implementation 'com.google.firebase:firebase-crashlytics'
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] google-services.jsoné…ç½®ç¢ºèª
- [ ] Gradle syncæˆåŠŸ
- [ ] ãƒ“ãƒ«ãƒ‰æˆåŠŸ
- [ ] FirebaseåˆæœŸåŒ–æˆåŠŸ

---

**SDK-003è©³ç´°: FirebaseåˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰**

```typescript
// src/services/firebase/firebaseConfig.ts
import { initializeApp } from '@react-native-firebase/app';
import auth from '@react-native-firebase/auth';
import firestore from '@react-native-firebase/firestore';
import analytics from '@react-native-firebase/analytics';
import crashlytics from '@react-native-firebase/crashlytics';

// FirebaseåˆæœŸåŒ–ã¯è‡ªå‹•ã§è¡Œã‚ã‚Œã‚‹(GoogleService-Info.plist/google-services.json)

export const firebaseAuth = auth();
export const firebaseFirestore = firestore();
export const firebaseAnalytics = analytics();
export const firebaseCrashlytics = crashlytics();

// é–‹ç™ºç’°å¢ƒã§ã¯Firestoreã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ä½¿ç”¨
if (__DEV__) {
  firebaseFirestore.useEmulator('localhost', 8080);
}

// Firestoreè¨­å®š
firebaseFirestore.settings({
  persistence: true, // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
  cacheSizeBytes: firestore.CACHE_SIZE_UNLIMITED,
});

// ãƒ­ã‚°è¨­å®š
export const logEvent = (eventName: string, params?: object) => {
  firebaseAnalytics.logEvent(eventName, params);
};

export const logError = (error: Error) => {
  firebaseCrashlytics.recordError(error);
};
```

**å®Œäº†æ¡ä»¶**:
- [ ] FirebaseåˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰å®Ÿè£…
- [ ] Firestoreæ¥ç¶šç¢ºèª
- [ ] Analyticsã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡ç¢ºèª
- [ ] Crashlyticsã‚¨ãƒ©ãƒ¼é€ä¿¡ç¢ºèª

---

## 5. Phase 1-2: èªè¨¼ãƒ»åŸºæœ¬UI

**æœŸé–“**: Week 2-3  
**ç›®æ¨™**: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ©Ÿèƒ½ã¨åŸºæœ¬çš„ãªUIç”»é¢ã‚’å®Œæˆã•ã›ã‚‹

### 5.1 èªè¨¼æ©Ÿèƒ½å®Ÿè£…

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **AUTH-001** | ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼UI | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | RN-005 | ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ç™»éŒ²ç”»é¢å®Œæˆ |
| **AUTH-002** | ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | SDK-003 | èªè¨¼ãƒ•ãƒ­ãƒ¼å‹•ä½œç¢ºèª |
| **AUTH-003** | OAuthèªè¨¼(Google) | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | AUTH-002 | Google Sign-Inå‹•ä½œç¢ºèª |
| **AUTH-004** | OAuthèªè¨¼(Apple) | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | AUTH-002 | Sign in with Appleå‹•ä½œç¢ºèª(iOS) |
| **AUTH-005** | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | ä¸­ | AUTH-002 | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡ç¢ºèª |
| **AUTH-006** | èªè¨¼çŠ¶æ…‹ç®¡ç† | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | AUTH-002 | Zustandã§ã®çŠ¶æ…‹ç®¡ç†å®Ÿè£… |
| **AUTH-007** | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…¥åŠ›ç”»é¢ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | AUTH-002 | åˆæœŸè¨­å®šãƒ•ãƒ­ãƒ¼å®Œæˆ |

**AUTH-001è©³ç´°: ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼UI**

```typescript
// src/screens/auth/LoginScreen.tsx
import React, { useState } from 'react';
import {
  View,
  Text,
  TextInput,
  TouchableOpacity,
  StyleSheet,
  ActivityIndicator,
} from 'react-native';
import { useNavigation } from '@react-navigation/native';

export default function LoginScreen() {
  const navigation = useNavigation();
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState('');

  const handleLogin = async () => {
    setIsLoading(true);
    setError('');
    
    try {
      // TODO: èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
      console.log('Login:', email, password);
    } catch (err) {
      setError('ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <View style={styles.container}>
      <Text style={styles.title}>ãƒ­ã‚°ã‚¤ãƒ³</Text>
      
      <TextInput
        style={styles.input}
        placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹"
        value={email}
        onChangeText={setEmail}
        keyboardType="email-address"
        autoCapitalize="none"
      />
      
      <TextInput
        style={styles.input}
        placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"
        value={password}
        onChangeText={setPassword}
        secureTextEntry
      />
      
      {error ? <Text style={styles.error}>{error}</Text> : null}
      
      <TouchableOpacity 
        style={styles.button} 
        onPress={handleLogin}
        disabled={isLoading}
      >
        {isLoading ? (
          <ActivityIndicator color="#fff" />
        ) : (
          <Text style={styles.buttonText}>ãƒ­ã‚°ã‚¤ãƒ³</Text>
        )}
      </TouchableOpacity>
      
      <TouchableOpacity onPress={() => navigation.navigate('Register')}>
        <Text style={styles.link}>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ</Text>
      </TouchableOpacity>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    padding: 20,
    backgroundColor: '#fff',
  },
  title: {
    fontSize: 24,
    fontWeight: 'bold',
    marginBottom: 20,
    textAlign: 'center',
  },
  input: {
    borderWidth: 1,
    borderColor: '#ddd',
    borderRadius: 8,
    padding: 12,
    marginBottom: 12,
    fontSize: 16,
  },
  button: {
    backgroundColor: '#007AFF',
    padding: 16,
    borderRadius: 8,
    alignItems: 'center',
    marginTop: 12,
  },
  buttonText: {
    color: '#fff',
    fontSize: 16,
    fontWeight: '600',
  },
  link: {
    color: '#007AFF',
    textAlign: 'center',
    marginTop: 12,
  },
  error: {
    color: 'red',
    marginBottom: 12,
    textAlign: 'center',
  },
});
```

**å®Œäº†æ¡ä»¶**:
- [ ] ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢UIå®Œæˆ
- [ ] ç™»éŒ²ç”»é¢UIå®Œæˆ
- [ ] ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

---

**AUTH-002è©³ç´°: ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯**

```typescript
// src/services/firebase/authService.ts
import { firebaseAuth } from './firebaseConfig';
import { FirebaseAuthTypes } from '@react-native-firebase/auth';

export interface LoginCredentials {
  email: string;
  password: string;
}

export interface RegisterCredentials extends LoginCredentials {
  displayName: string;
}

/**
 * ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³
 */
export const loginWithEmailPassword = async (
  credentials: LoginCredentials
): Promise<FirebaseAuthTypes.UserCredential> => {
  const { email, password } = credentials;
  
  return await firebaseAuth.signInWithEmailAndPassword(email, password);
};

/**
 * ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§æ–°è¦ç™»éŒ²
 */
export const registerWithEmailPassword = async (
  credentials: RegisterCredentials
): Promise<FirebaseAuthTypes.UserCredential> => {
  const { email, password, displayName } = credentials;
  
  const userCredential = await firebaseAuth.createUserWithEmailAndPassword(
    email,
    password
  );
  
  // displayNameè¨­å®š
  await userCredential.user.updateProfile({ displayName });
  
  return userCredential;
};

/**
 * ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
 */
export const logout = async (): Promise<void> => {
  await firebaseAuth.signOut();
};

/**
 * ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆãƒ¡ãƒ¼ãƒ«é€ä¿¡
 */
export const sendPasswordResetEmail = async (email: string): Promise<void> => {
  await firebaseAuth.sendPasswordResetEmail(email);
};
```

**å®Œäº†æ¡ä»¶**:
- [ ] ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½å‹•ä½œç¢ºèª
- [ ] æ–°è¦ç™»éŒ²æ©Ÿèƒ½å‹•ä½œç¢ºèª
- [ ] ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½å‹•ä½œç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

---

**AUTH-003è©³ç´°: OAuthèªè¨¼(Google)**

```bash
# Google Sign-Inãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install @react-native-google-signin/google-signin
```

```typescript
// src/services/firebase/oauthService.ts
import { GoogleSignin } from '@react-native-google-signin/google-signin';
import { firebaseAuth } from './firebaseConfig';

// Google Sign-InåˆæœŸåŒ–
GoogleSignin.configure({
  webClientId: 'YOUR_WEB_CLIENT_ID', // Firebase Console ã‹ã‚‰å–å¾—
});

/**
 * Googleã§ãƒ­ã‚°ã‚¤ãƒ³
 */
export const loginWithGoogle = async () => {
  try {
    // Googleèªè¨¼
    await GoogleSignin.hasPlayServices();
    const { idToken } = await GoogleSignin.signIn();
    
    // Firebaseèªè¨¼
    const googleCredential = firebaseAuth.GoogleAuthProvider.credential(idToken);
    return await firebaseAuth.signInWithCredential(googleCredential);
  } catch (error) {
    console.error('Google Sign-In Error:', error);
    throw error;
  }
};
```

**å®Œäº†æ¡ä»¶**:
- [ ] Google Sign-Inè¨­å®šå®Œäº†
- [ ] Googleèªè¨¼å‹•ä½œç¢ºèª(iOS/Android)
- [ ] Firebaseãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

---

**AUTH-006è©³ç´°: èªè¨¼çŠ¶æ…‹ç®¡ç†**

```typescript
// src/store/authStore.ts
import { create } from 'zustand';
import { immer } from 'zustand/middleware/immer';
import { FirebaseAuthTypes } from '@react-native-firebase/auth';

interface AuthState {
  user: FirebaseAuthTypes.User | null;
  isLoading: boolean;
  error: string | null;
  
  setUser: (user: FirebaseAuthTypes.User | null) => void;
  setLoading: (isLoading: boolean) => void;
  setError: (error: string | null) => void;
  clearError: () => void;
}

export const useAuthStore = create<AuthState>()(
  immer((set) => ({
    user: null,
    isLoading: false,
    error: null,
    
    setUser: (user) =>
      set((state) => {
        state.user = user;
      }),
    
    setLoading: (isLoading) =>
      set((state) => {
        state.isLoading = isLoading;
      }),
    
    setError: (error) =>
      set((state) => {
        state.error = error;
      }),
    
    clearError: () =>
      set((state) => {
        state.error = null;
      }),
  }))
);
```

**å®Œäº†æ¡ä»¶**:
- [ ] Zustandã‚¹ãƒˆã‚¢å®Ÿè£…
- [ ] èªè¨¼çŠ¶æ…‹ã®æ°¸ç¶šåŒ–
- [ ] ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã®è‡ªå‹•å¾©å…ƒ
- [ ] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã®é€£æº

---

(Part 2 ç¶šã - æ¬¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¸)
# é–‹ç™ºã‚¿ã‚¹ã‚¯è©³ç´° + ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« v3.1 (Part 3/4)

## 6. Phase 1-3: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…

**æœŸé–“**: Week 3-4  
**ç›®æ¨™**: MediaPipeçµ±åˆã¨æœ€åˆã®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ç¨®ç›®(ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ)ã‚’å®Œæˆã•ã›ã‚‹

### 6.1 MediaPipe Poseçµ±åˆ

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **ML-001** | MediaPipe Poseãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | RN-002 | ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå‹•ä½œç¢ºèª |
| **ML-002** | ã‚«ãƒ¡ãƒ©æ¨©é™ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | ML-001 | ã‚«ãƒ¡ãƒ©èµ·å‹•ãƒ»ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º |
| **ML-003** | éª¨æ ¼æ¤œå‡ºå®Ÿè£… | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | ML-002 | 33ç‚¹ã®ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯å–å¾—ç¢ºèª |
| **ML-004** | éª¨æ ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤æç”» | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | ML-003 | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ éª¨æ ¼è¡¨ç¤º |
| **ML-005** | æ¤œå‡ºç²¾åº¦æœ€é©åŒ– | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | ä¸­ | ML-003 | ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢èª¿æ•´ |
| **ML-006** | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | ML-003 | æ¤œå‡ºå¤±æ•—æ™‚ã®å¯¾å¿œ |

**ML-001è©³ç´°: MediaPipe Poseãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±åˆ**

```bash
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install @mediapipe/pose
npm install @mediapipe/tasks-vision
```

```typescript
// src/services/ml/poseDetector.ts
import { Pose, FilesetResolver, PoseLandmarker } from '@mediapipe/tasks-vision';

export class PoseDetectorService {
  private poseLandmarker: PoseLandmarker | null = null;
  
  /**
   * MediaPipe PoseåˆæœŸåŒ–
   */
  async initialize(): Promise<void> {
    const vision = await FilesetResolver.forVisionTasks(
      'https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm'
    );
    
    this.poseLandmarker = await PoseLandmarker.createFromOptions(vision, {
      baseOptions: {
        modelAssetPath: 'https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task',
        delegate: 'GPU', // GPUä½¿ç”¨
      },
      runningMode: 'VIDEO',
      numPoses: 1, // 1äººã®ã¿æ¤œå‡º
      minPoseDetectionConfidence: 0.5,
      minPosePresenceConfidence: 0.5,
      minTrackingConfidence: 0.5,
    });
  }
  
  /**
   * ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰éª¨æ ¼æ¤œå‡º
   */
  async detectPose(videoFrame: HTMLVideoElement, timestamp: number) {
    if (!this.poseLandmarker) {
      throw new Error('PoseLandmarker not initialized');
    }
    
    const result = await this.poseLandmarker.detectForVideo(videoFrame, timestamp);
    return result;
  }
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] MediaPipe Poseãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
- [ ] åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰å®Ÿè£…
- [ ] ãƒ‡ãƒ¢å‹•ç”»ã§ã®éª¨æ ¼æ¤œå‡ºç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

---

**ML-002è©³ç´°: ã‚«ãƒ¡ãƒ©æ¨©é™ãƒ»ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

```typescript
// src/services/camera/cameraService.ts
import { Camera, useCameraDevices } from 'react-native-vision-camera';

/**
 * ã‚«ãƒ¡ãƒ©æ¨©é™ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
 */
export const requestCameraPermission = async (): Promise<boolean> => {
  const permission = await Camera.requestCameraPermission();
  
  if (permission === 'denied') {
    // è¨­å®šç”»é¢ã¸èª˜å°
    return false;
  }
  
  return permission === 'granted';
};

/**
 * ã‚«ãƒ¡ãƒ©ãƒ‡ãƒã‚¤ã‚¹å–å¾—
 */
export const useFrontCamera = () => {
  const devices = useCameraDevices();
  return devices.front;
};
```

**AndroidManifest.xml**:

```xml
<!-- android/app/src/main/AndroidManifest.xml -->
<uses-permission android:name="android.permission.CAMERA" />
```

**Info.plist**:

```xml
<!-- ios/AIFitnessApp/Info.plist -->
<key>NSCameraUsageDescription</key>
<string>ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ•ã‚©ãƒ¼ãƒ ã®ç¢ºèªã«ä½¿ç”¨ã—ã¾ã™</string>
```

**å®Œäº†æ¡ä»¶**:
- [ ] ã‚«ãƒ¡ãƒ©æ¨©é™å®Ÿè£…
- [ ] iOS/Androidã§ã‚«ãƒ¡ãƒ©èµ·å‹•ç¢ºèª
- [ ] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

---

**ML-003è©³ç´°: éª¨æ ¼æ¤œå‡ºå®Ÿè£…**

```typescript
// src/services/ml/poseLandmarks.ts

/**
 * MediaPipe Poseãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯å®šç¾©
 * (5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°v3.1ç¬¬3ç« å‚ç…§)
 */
export enum PoseLandmark {
  NOSE = 0,
  LEFT_EYE_INNER = 1,
  LEFT_EYE = 2,
  LEFT_EYE_OUTER = 3,
  RIGHT_EYE_INNER = 4,
  RIGHT_EYE = 5,
  RIGHT_EYE_OUTER = 6,
  LEFT_EAR = 7,
  RIGHT_EAR = 8,
  MOUTH_LEFT = 9,
  MOUTH_RIGHT = 10,
  LEFT_SHOULDER = 11,
  RIGHT_SHOULDER = 12,
  LEFT_ELBOW = 13,
  RIGHT_ELBOW = 14,
  LEFT_WRIST = 15,
  RIGHT_WRIST = 16,
  LEFT_PINKY = 17,
  RIGHT_PINKY = 18,
  LEFT_INDEX = 19,
  RIGHT_INDEX = 20,
  LEFT_THUMB = 21,
  RIGHT_THUMB = 22,
  LEFT_HIP = 23,
  RIGHT_HIP = 24,
  LEFT_KNEE = 25,
  RIGHT_KNEE = 26,
  LEFT_ANKLE = 27,
  RIGHT_ANKLE = 28,
  LEFT_HEEL = 29,
  RIGHT_HEEL = 30,
  LEFT_FOOT_INDEX = 31,
  RIGHT_FOOT_INDEX = 32,
}

/**
 * ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯åº§æ¨™
 */
export interface Landmark {
  x: number; // 0-1ã®æ­£è¦åŒ–åº§æ¨™
  y: number; // 0-1ã®æ­£è¦åŒ–åº§æ¨™
  z: number; // æ·±åº¦(ã‚«ãƒ¡ãƒ©ã‹ã‚‰ã®è·é›¢)
  visibility: number; // 0-1ã®ä¿¡é ¼åº¦
}

/**
 * æ¤œå‡ºçµæœ
 */
export interface PoseDetectionResult {
  landmarks: Landmark[];
  worldLandmarks: Landmark[]; // 3Dç©ºé–“åº§æ¨™
  timestamp: number;
}

/**
 * æœ€å°ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢(5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°v3.1ç¬¬3.2ç¯€)
 */
export const MIN_CONFIDENCE = 0.65;

/**
 * ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯ã®å¯è¦–æ€§ãƒã‚§ãƒƒã‚¯
 */
export const isLandmarkVisible = (landmark: Landmark): boolean => {
  return landmark.visibility >= MIN_CONFIDENCE;
};
```

**å®Œäº†æ¡ä»¶**:
- [ ] éª¨æ ¼æ¤œå‡ºã‚³ãƒ¼ãƒ‰å®Ÿè£…
- [ ] 33ç‚¹ã®ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯å–å¾—ç¢ºèª
- [ ] ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ã®ç¢ºèª
- [ ] è¤‡æ•°ãƒ•ãƒ¬ãƒ¼ãƒ ã§ã®å®‰å®šæ€§ç¢ºèª

---

**ML-004è©³ç´°: éª¨æ ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤æç”»**

```typescript
// src/components/training/PoseOverlay.tsx
import React from 'react';
import { Canvas, Circle, Line, vec } from '@shopify/react-native-skia';
import { Landmark, PoseLandmark } from '@services/ml/poseLandmarks';

interface PoseOverlayProps {
  landmarks: Landmark[];
  width: number;
  height: number;
}

/**
 * éª¨æ ¼æ¥ç¶šå®šç¾©
 * (5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°v3.1ç¬¬2.3.1ç¯€å‚ç…§)
 */
const POSE_CONNECTIONS = [
  // é¡”
  [PoseLandmark.LEFT_EYE, PoseLandmark.RIGHT_EYE],
  
  // ä¸ŠåŠèº«
  [PoseLandmark.LEFT_SHOULDER, PoseLandmark.RIGHT_SHOULDER],
  [PoseLandmark.LEFT_SHOULDER, PoseLandmark.LEFT_ELBOW],
  [PoseLandmark.LEFT_ELBOW, PoseLandmark.LEFT_WRIST],
  [PoseLandmark.RIGHT_SHOULDER, PoseLandmark.RIGHT_ELBOW],
  [PoseLandmark.RIGHT_ELBOW, PoseLandmark.RIGHT_WRIST],
  
  // ä½“å¹¹
  [PoseLandmark.LEFT_SHOULDER, PoseLandmark.LEFT_HIP],
  [PoseLandmark.RIGHT_SHOULDER, PoseLandmark.RIGHT_HIP],
  [PoseLandmark.LEFT_HIP, PoseLandmark.RIGHT_HIP],
  
  // ä¸‹åŠèº«
  [PoseLandmark.LEFT_HIP, PoseLandmark.LEFT_KNEE],
  [PoseLandmark.LEFT_KNEE, PoseLandmark.LEFT_ANKLE],
  [PoseLandmark.RIGHT_HIP, PoseLandmark.RIGHT_KNEE],
  [PoseLandmark.RIGHT_KNEE, PoseLandmark.RIGHT_ANKLE],
];

/**
 * ã‚¹ã‚³ã‚¢ã«å¿œã˜ãŸè‰²
 * (5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°v3.1ç¬¬2.3.1ç¯€å‚ç…§)
 */
const getColorForScore = (score: number): string => {
  if (score >= 90) return '#4CAF50'; // å„ªè‰¯: é’
  if (score >= 70) return '#FFC107'; // è‰¯å¥½: é»„
  if (score >= 50) return '#FF9800'; // æ³¨æ„: ã‚ªãƒ¬ãƒ³ã‚¸
  return '#F44336'; // è¦æ”¹å–„: èµ¤
};

export default function PoseOverlay({ landmarks, width, height }: PoseOverlayProps) {
  return (
    <Canvas style={{ width, height }}>
      {/* éª¨æ ¼ç·šæç”» */}
      {POSE_CONNECTIONS.map(([start, end], index) => {
        const startLm = landmarks[start];
        const endLm = landmarks[end];
        
        if (!startLm || !endLm) return null;
        
        const color = getColorForScore(
          Math.min(startLm.visibility, endLm.visibility) * 100
        );
        
        return (
          <Line
            key={`line-${index}`}
            p1={vec(startLm.x * width, startLm.y * height)}
            p2={vec(endLm.x * width, endLm.y * height)}
            color={color}
            style="stroke"
            strokeWidth={3}
          />
        );
      })}
      
      {/* é–¢ç¯€ç‚¹æç”» */}
      {landmarks.map((landmark, index) => {
        if (!landmark) return null;
        
        const color = getColorForScore(landmark.visibility * 100);
        
        return (
          <Circle
            key={`point-${index}`}
            cx={landmark.x * width}
            cy={landmark.y * height}
            r={6}
            color={color}
          />
        );
      })}
    </Canvas>
  );
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] éª¨æ ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤UIå®Ÿè£…
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æç”»ç¢ºèª
- [ ] è‰²åˆ†ã‘å‹•ä½œç¢ºèª
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª(60fpsç¶­æŒ)

---

### 6.2 ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆå®Ÿè£…

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **SQ-001** | ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆè§’åº¦è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | ML-003 | è†ãƒ»è‚¡é–¢ç¯€è§’åº¦ç®—å‡ºç¢ºèª |
| **SQ-002** | ãƒ•ã‚©ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | SQ-001 | 5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£… |
| **SQ-003** | å›æ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | SQ-002 | çŠ¶æ…‹é·ç§»ãƒ™ãƒ¼ã‚¹ã®ã‚«ã‚¦ãƒ³ãƒˆ |
| **SQ-004** | éŸ³å£°ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹å®Ÿè£… | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | ä¸­ | SQ-002 | TTS/éŒ²éŸ³éŸ³å£°å†ç”Ÿ |
| **SQ-005** | å‚è€ƒã‚¹ã‚³ã‚¢è¡¨ç¤ºUI | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | SQ-002 | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¹ã‚³ã‚¢è¡¨ç¤º |
| **SQ-006** | ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²æ©Ÿèƒ½ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | SDK-004 | Firestoreã¸ã®ä¿å­˜ç¢ºèª |

**SQ-001è©³ç´°: ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆè§’åº¦è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯**

```typescript
// src/services/ml/angleCalculator.ts

/**
 * 2ç‚¹é–“ã®è§’åº¦ã‚’è¨ˆç®—(ãƒ©ã‚¸ã‚¢ãƒ³)
 */
export const calculateAngle = (
  a: Landmark,
  b: Landmark,
  c: Landmark
): number => {
  const radians =
    Math.atan2(c.y - b.y, c.x - b.x) - Math.atan2(a.y - b.y, a.x - b.x);
  
  let angle = Math.abs((radians * 180.0) / Math.PI);
  
  if (angle > 180.0) {
    angle = 360 - angle;
  }
  
  return angle;
};

/**
 * ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆã®ä¸»è¦è§’åº¦è¨ˆç®—
 * (5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°v3.1ç¬¬4ç« å‚ç…§)
 */
export const calculateSquatAngles = (landmarks: Landmark[]) => {
  // è†ã®è§’åº¦(å·¦å³å¹³å‡)
  const leftKneeAngle = calculateAngle(
    landmarks[PoseLandmark.LEFT_HIP],
    landmarks[PoseLandmark.LEFT_KNEE],
    landmarks[PoseLandmark.LEFT_ANKLE]
  );
  
  const rightKneeAngle = calculateAngle(
    landmarks[PoseLandmark.RIGHT_HIP],
    landmarks[PoseLandmark.RIGHT_KNEE],
    landmarks[PoseLandmark.RIGHT_ANKLE]
  );
  
  const avgKneeAngle = (leftKneeAngle + rightKneeAngle) / 2;
  
  // è‚¡é–¢ç¯€ã®è§’åº¦(å·¦å³å¹³å‡)
  const leftHipAngle = calculateAngle(
    landmarks[PoseLandmark.LEFT_SHOULDER],
    landmarks[PoseLandmark.LEFT_HIP],
    landmarks[PoseLandmark.LEFT_KNEE]
  );
  
  const rightHipAngle = calculateAngle(
    landmarks[PoseLandmark.RIGHT_SHOULDER],
    landmarks[PoseLandmark.RIGHT_HIP],
    landmarks[PoseLandmark.RIGHT_KNEE]
  );
  
  const avgHipAngle = (leftHipAngle + rightHipAngle) / 2;
  
  // èƒŒä¸­ã®è§’åº¦
  const backAngle = calculateAngle(
    landmarks[PoseLandmark.LEFT_SHOULDER],
    landmarks[PoseLandmark.LEFT_HIP],
    { x: landmarks[PoseLandmark.LEFT_HIP].x, y: 1, z: 0 }
  );
  
  return {
    kneeAngle: avgKneeAngle,
    hipAngle: avgHipAngle,
    backAngle: backAngle,
    leftKneeAngle,
    rightKneeAngle,
    leftHipAngle,
    rightHipAngle,
  };
};
```

**å®Œäº†æ¡ä»¶**:
- [ ] è§’åº¦è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ã®ç²¾åº¦ç¢ºèª
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®—ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç¢ºèª

---

**SQ-002è©³ç´°: ãƒ•ã‚©ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯**

```typescript
// src/services/training/squatFormChecker.ts
import { calculateSquatAngles } from '@services/ml/angleCalculator';
import { Landmark } from '@services/ml/poseLandmarks';

/**
 * ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯çµæœ
 * (5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°v3.1ç¬¬4.4ç¯€)
 */
export interface SquatFormCheckResult {
  overallScore: number; // ç·åˆå‚è€ƒã‚¹ã‚³ã‚¢(0-100)
  overallMessage: string; // ç·åˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
  checkpoints: CheckpointResult[];
  disclaimer: string; // å¿…é ˆã®æ³¨æ„æ›¸ã
}

export interface CheckpointResult {
  name: string;
  score: number;
  message: string;
}

/**
 * ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯
 */
export const checkSquatForm = (landmarks: Landmark[]): SquatFormCheckResult => {
  const angles = calculateSquatAngles(landmarks);
  const checkpoints: CheckpointResult[] = [];
  
  // 1. è†ã®è§’åº¦ãƒã‚§ãƒƒã‚¯
  const kneeScore = checkKneeAngle(angles.kneeAngle);
  checkpoints.push({
    name: 'è†ã®è§’åº¦',
    score: kneeScore,
    message: getKneeMessage(kneeScore, angles.kneeAngle),
  });
  
  // 2. è‚¡é–¢ç¯€ã®è§’åº¦ãƒã‚§ãƒƒã‚¯
  const hipScore = checkHipAngle(angles.hipAngle);
  checkpoints.push({
    name: 'è‚¡é–¢ç¯€ã®è§’åº¦',
    score: hipScore,
    message: getHipMessage(hipScore, angles.hipAngle),
  });
  
  // 3. èƒŒä¸­ã®è§’åº¦ãƒã‚§ãƒƒã‚¯(é‡è¦)
  const backScore = checkBackAngle(angles.backAngle);
  checkpoints.push({
    name: 'èƒŒä¸­ã®è§’åº¦',
    score: backScore,
    message: getBackMessage(backScore, angles.backAngle),
  });
  
  // 4. å·¦å³ãƒãƒ©ãƒ³ã‚¹ãƒã‚§ãƒƒã‚¯
  const balanceScore = checkBalance(angles.leftKneeAngle, angles.rightKneeAngle);
  checkpoints.push({
    name: 'å·¦å³ãƒãƒ©ãƒ³ã‚¹',
    score: balanceScore,
    message: getBalanceMessage(balanceScore),
  });
  
  // ç·åˆã‚¹ã‚³ã‚¢è¨ˆç®—(é‡ã¿ä»˜ã‘)
  const overallScore = Math.round(
    kneeScore * 0.3 +
    hipScore * 0.2 +
    backScore * 0.4 + // èƒŒä¸­ã¯é‡è¦åº¦é«˜
    balanceScore * 0.1
  );
  
  return {
    overallScore,
    overallMessage: getOverallMessage(overallScore),
    checkpoints,
    disclaimer: 'â„¹ï¸ è¡¨ç¤ºã•ã‚Œã‚‹ã‚¹ã‚³ã‚¢ã¯å‚è€ƒæƒ…å ±ã§ã™', // åˆ©ç”¨è¦ç´„v3.1ç¬¬3.4æ¡æº–æ‹ 
  };
};

/**
 * è†ã®è§’åº¦ãƒã‚§ãƒƒã‚¯
 * ç†æƒ³: 90åº¦å‰å¾Œ(æ·±ã•ã«ã‚ˆã‚‹)
 */
const checkKneeAngle = (angle: number): number => {
  if (angle >= 85 && angle <= 95) return 100; // ç†æƒ³çš„
  if (angle >= 70 && angle <= 110) return 80; // è‰¯å¥½
  if (angle >= 60 && angle <= 120) return 60; // æ³¨æ„
  return 40; // è¦æ”¹å–„
};

/**
 * èƒŒä¸­ã®è§’åº¦ãƒã‚§ãƒƒã‚¯
 * ç†æƒ³: ã¾ã£ã™ã(165-180åº¦)
 */
const checkBackAngle = (angle: number): number => {
  if (angle >= 165) return 100; // ç†æƒ³çš„
  if (angle >= 150) return 70; // è¨±å®¹ç¯„å›²
  if (angle >= 135) return 50; // æ³¨æ„
  return 30; // å±é™º(èƒŒä¸­ãŒä¸¸ã¾ã£ã¦ã„ã‚‹)
};
```

**å®Œäº†æ¡ä»¶**:
- [ ] ãƒ•ã‚©ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- [ ] å„ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã®å‚è€ƒã‚¹ã‚³ã‚¢è¨ˆç®—ç¢ºèª
- [ ] ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆç¢ºèª
- [ ] å¿…é ˆæ³¨æ„æ›¸ãè¡¨ç¤ºç¢ºèª

---

**SQ-003è©³ç´°: å›æ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯**

```typescript
// src/services/training/squatCounter.ts

/**
 * ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆçŠ¶æ…‹
 * (5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°v3.1ç¬¬2.4.1ç¯€)
 */
enum SquatPhase {
  READY = 'ready',
  DESCENDING = 'descending',
  BOTTOM = 'bottom',
  ASCENDING = 'ascending',
  TOP = 'top',
}

interface SquatCountState {
  currentPhase: SquatPhase;
  phaseStartTime: number;
  repCount: number;
  minKneeAngle: number;
  maxKneeAngle: number;
}

/**
 * æœ€å°ãƒ•ã‚§ãƒ¼ã‚ºæŒç¶šæ™‚é–“(ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°é˜²æ­¢)
 * (5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°v3.1ç¬¬2.4.2ç¯€)
 */
const MIN_PHASE_DURATION = 200; // ãƒŸãƒªç§’

/**
 * ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆå›æ•°ã‚«ã‚¦ãƒ³ãƒˆ
 */
export class SquatCounter {
  private state: SquatCountState = {
    currentPhase: SquatPhase.READY,
    phaseStartTime: Date.now(),
    repCount: 0,
    minKneeAngle: 180,
    maxKneeAngle: 0,
  };
  
  /**
   * çŠ¶æ…‹æ›´æ–°
   */
  update(kneeAngle: number): number {
    const now = Date.now();
    const timeSincePhaseStart = now - this.state.phaseStartTime;
    
    // æœ€å°ãƒ•ã‚§ãƒ¼ã‚ºæŒç¶šæ™‚é–“ãƒã‚§ãƒƒã‚¯
    if (timeSincePhaseStart < MIN_PHASE_DURATION) {
      return this.state.repCount;
    }
    
    switch (this.state.currentPhase) {
      case SquatPhase.READY:
        // é–‹å§‹ä½ç½®
        if (kneeAngle >= 170) {
          // ä¸‹é™é–‹å§‹
          this.state.currentPhase = SquatPhase.DESCENDING;
          this.state.phaseStartTime = now;
          this.state.minKneeAngle = 180;
        }
        break;
        
      case SquatPhase.DESCENDING:
        // ä¸‹é™ä¸­
        this.state.minKneeAngle = Math.min(this.state.minKneeAngle, kneeAngle);
        
        if (kneeAngle <= 100 && this.state.minKneeAngle <= 100) {
          // æœ€ä¸‹ç‚¹åˆ°é”
          this.state.currentPhase = SquatPhase.BOTTOM;
          this.state.phaseStartTime = now;
          this.state.maxKneeAngle = 0;
        }
        break;
        
      case SquatPhase.BOTTOM:
        // æœ€ä¸‹ç‚¹
        if (kneeAngle > 100) {
          // ä¸Šæ˜‡é–‹å§‹
          this.state.currentPhase = SquatPhase.ASCENDING;
          this.state.phaseStartTime = now;
        }
        break;
        
      case SquatPhase.ASCENDING:
        // ä¸Šæ˜‡ä¸­
        this.state.maxKneeAngle = Math.max(this.state.maxKneeAngle, kneeAngle);
        
        if (kneeAngle >= 170 && this.state.maxKneeAngle >= 170) {
          // æœ€ä¸Šç‚¹åˆ°é”(1å›å®Œäº†)
          this.state.currentPhase = SquatPhase.TOP;
          this.state.phaseStartTime = now;
          this.state.repCount++;
          
          // æ¬¡ã®repã®æº–å‚™
          setTimeout(() => {
            this.state.currentPhase = SquatPhase.READY;
            this.state.phaseStartTime = Date.now();
          }, 100);
        }
        break;
    }
    
    return this.state.repCount;
  }
  
  /**
   * ã‚«ã‚¦ãƒ³ãƒˆãƒªã‚»ãƒƒãƒˆ
   */
  reset(): void {
    this.state = {
      currentPhase: SquatPhase.READY,
      phaseStartTime: Date.now(),
      repCount: 0,
      minKneeAngle: 180,
      maxKneeAngle: 0,
    };
  }
  
  /**
   * ç¾åœ¨ã®å›æ•°å–å¾—
   */
  getCount(): number {
    return this.state.repCount;
  }
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] å›æ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- [ ] çŠ¶æ…‹é·ç§»ã®å‹•ä½œç¢ºèª
- [ ] ãƒãƒ£ã‚¿ãƒªãƒ³ã‚°é˜²æ­¢ç¢ºèª
- [ ] èª¤ã‚«ã‚¦ãƒ³ãƒˆé˜²æ­¢ç¢ºèª

---

## 7. Phase 2-1: MVPå®Œæˆ

**æœŸé–“**: Month 2  
**ç›®æ¨™**: æ®‹ã‚Š4ç¨®ç›®ã‚’å®Ÿè£…ã—ã€ãƒ‡ãƒ¼ã‚¿åé›†åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹

### 7.1 æ®‹ã‚Š4ç¨®ç›®å®Ÿè£…

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **EX-001** | ãƒ—ãƒƒã‚·ãƒ¥ã‚¢ãƒƒãƒ—å®Ÿè£… | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 3æ—¥ | é«˜ | SQ-006 | 5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯æº–æ‹  |
| **EX-002** | ãƒ€ãƒ³ãƒ™ãƒ«ã‚«ãƒ¼ãƒ«å®Ÿè£… | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 3æ—¥ | é«˜ | EX-001 | 5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯æº–æ‹  |
| **EX-003** | ã‚·ãƒ§ãƒ«ãƒ€ãƒ¼ãƒ—ãƒ¬ã‚¹å®Ÿè£… | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 3æ—¥ | é«˜ | EX-002 | 5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯æº–æ‹  |
| **EX-004** | ãƒ‡ãƒƒãƒ‰ãƒªãƒ•ãƒˆå®Ÿè£… | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 3æ—¥ | é«˜ | EX-003 | 5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯æº–æ‹  |
| **EX-005** | ç¨®ç›®é¸æŠç”»é¢ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | EX-004 | 5ç¨®ç›®ã‹ã‚‰é¸æŠå¯èƒ½ |

**å„ç¨®ç›®ã®å®Ÿè£…å†…å®¹**:
- 5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°v3.1ã®è©²å½“ç« ã«æº–æ‹ 
- è§’åº¦è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯
- ãƒ•ã‚©ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯
- å›æ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯
- éŸ³å£°ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹
- å‚è€ƒã‚¹ã‚³ã‚¢è¡¨ç¤º

**å®Œäº†æ¡ä»¶(å„ç¨®ç›®)**:
- [ ] è§’åº¦è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- [ ] ãƒ•ã‚©ãƒ¼ãƒ ãƒã‚§ãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
- [ ] å›æ•°ã‚«ã‚¦ãƒ³ãƒˆå‹•ä½œç¢ºèª
- [ ] éŸ³å£°ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ç¢ºèª
- [ ] å‚è€ƒã‚¹ã‚³ã‚¢è¡¨ç¤ºç¢ºèª
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨˜éŒ²ç¢ºèª

---

### 7.2 ãƒ‡ãƒ¼ã‚¿åé›†åŸºç›¤

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **DATA-001** | Firestoreãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£… | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | SDK-004 | å…¨ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ |
| **DATA-002** | BigQueryãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆä½œæˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | GCP-002 | ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆç¢ºèª |
| **DATA-003** | ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿ãƒãƒƒãƒ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 3æ—¥ | é«˜ | DATA-001,002 | æ—¥æ¬¡ãƒãƒƒãƒå‹•ä½œç¢ºèª |
| **DATA-004** | éª¨æ ¼åº§æ¨™ãƒ‡ãƒ¼ã‚¿åé›† | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | ML-003 | åº§æ¨™ãƒ‡ãƒ¼ã‚¿Firestoreä¿å­˜ |
| **DATA-005** | ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿åé›† | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | SQ-006 | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜ç¢ºèª |
| **DATA-006** | ãƒ‡ãƒ¼ã‚¿ä»®ååŒ–å‡¦ç† | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | DATA-003 | SHA-256ãƒãƒƒã‚·ãƒ¥åŒ–ç¢ºèª |

**DATA-001è©³ç´°: Firestoreãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®Ÿè£…**

å‚ç…§: Firestoreãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸v3.1ç¬¬4ç« 

å®Ÿè£…ã™ã‚‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³:
- users
- training_sessions
- exercises
- user_preferences
- consent_logs
- export_logs
- deletion_logs

**å®Œäº†æ¡ä»¶**:
- [ ] å…¨ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ
- [ ] Security Ruleså®Ÿè£…
- [ ] ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
- [ ] ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ãƒ†ã‚¹ãƒˆ

---

**DATA-003è©³ç´°: ãƒ‡ãƒ¼ã‚¿å–ã‚Šè¾¼ã¿ãƒãƒƒãƒ**

```typescript
// functions/src/scheduled/dailyBigQuerySync.ts
import * as functions from 'firebase-functions';
import * as admin from 'firebase-admin';
import { BigQuery } from '@google-cloud/bigquery';
import * as crypto from 'crypto';

/**
 * æ—¥æ¬¡BigQueryåŒæœŸ
 * æ¯æ—¥åˆå‰2æ™‚(JST)å®Ÿè¡Œ
 */
export const dailyBigQuerySync = functions
  .region('asia-northeast1')
  .pubsub.schedule('0 2 * * *')
  .timeZone('Asia/Tokyo')
  .onRun(async (context) => {
    const firestore = admin.firestore();
    const bigquery = new BigQuery();
    
    // å‰æ—¥ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å–å¾—
    const yesterday = new Date();
    yesterday.setDate(yesterday.getDate() - 1);
    yesterday.setHours(0, 0, 0, 0);
    
    const sessionsSnapshot = await firestore
      .collection('training_sessions')
      .where('startedAt', '>=', yesterday)
      .get();
    
    const rows = sessionsSnapshot.docs.map(doc => {
      const data = doc.data();
      
      return {
        session_id: doc.id,
        user_hashed: hashUserId(data.userId), // ä»®ååŒ–
        exercise_id: data.exerciseId,
        exercise_name: data.exerciseName,
        exercise_category: data.exerciseCategory,
        started_at: data.startedAt.toDate().toISOString(),
        ended_at: data.endedAt.toDate().toISOString(),
        duration_seconds: data.durationSeconds,
        rep_count: data.repCount,
        set_count: data.setCount,
        reference_score: data.referenceScore,
        device_os: data.deviceInfo.os,
        device_model: data.deviceInfo.model,
        created_at: new Date().toISOString(),
      };
    });
    
    // BigQueryã«æŒ¿å…¥
    await bigquery
      .dataset('fitness_app_prod')
      .table('training_sessions')
      .insert(rows);
    
    console.log(`Synced ${rows.length} sessions to BigQuery`);
  });

/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼IDä»®ååŒ–
 * (ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼v3.1ç¬¬8.3æ¡æº–æ‹ )
 */
function hashUserId(userId: string): string {
  return crypto.createHash('sha256').update(userId).digest('hex');
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] Cloud Schedulerã‚¸ãƒ§ãƒ–ä½œæˆ
- [ ] Firestoreâ†’BigQueryåŒæœŸç¢ºèª
- [ ] ä»®ååŒ–å‡¦ç†ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

---

(Part 3 ç¶šã - æ¬¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¸)
# é–‹ç™ºã‚¿ã‚¹ã‚¯è©³ç´° + ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« v3.1 (Part 4/4)

## 8. Phase 2-2: ãƒ†ã‚¹ãƒˆãƒ»æ”¹å–„

**æœŸé–“**: Month 3-4  
**ç›®æ¨™**: èª²é‡‘æ©Ÿèƒ½ã€GDPRå¯¾å¿œã‚’å®Ÿè£…ã—ã€ãƒ†ã‚¹ãƒˆã‚’çµŒã¦MVPã‚’ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹

### 8.1 èª²é‡‘æ©Ÿèƒ½å®Ÿè£…

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **REV-001** | RevenueCatçµ±åˆ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | SDK-003 | RevenueCatåˆæœŸåŒ–ç¢ºèª |
| **REV-002** | ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¨­å®š(iOS) | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | REV-001 | App Store Connectè¨­å®š |
| **REV-003** | ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¨­å®š(Android) | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | REV-001 | Google Play Consoleè¨­å®š |
| **REV-004** | ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³UI | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | REV-001 | è³¼å…¥ãƒ•ãƒ­ãƒ¼å®Ÿè£… |
| **REV-005** | ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«å®Ÿè£… | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | REV-004 | 7æ—¥é–“ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ç¢ºèª |
| **REV-006** | åˆ©ç”¨åˆ¶é™å®Ÿè£… | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | REV-004 | ç„¡æ–™ãƒ—ãƒ©ãƒ³3å›/æ—¥åˆ¶é™ |
| **REV-007** | è³¼å…¥å¾©å…ƒæ©Ÿèƒ½ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 1æ—¥ | ä¸­ | REV-004 | è³¼å…¥å±¥æ­´å¾©å…ƒç¢ºèª |

**REV-001è©³ç´°: RevenueCatçµ±åˆ**

```bash
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install react-native-purchases
```

```typescript
// src/services/subscription/revenueCatService.ts
import Purchases from 'react-native-purchases';

/**
 * RevenueCatåˆæœŸåŒ–
 */
export const initializeRevenueCat = async (userId: string) => {
  // ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥APIã‚­ãƒ¼
  const apiKey = Platform.select({
    ios: 'appl_xxxxxxxxxx',
    android: 'goog_xxxxxxxxxx',
  });
  
  if (!apiKey) {
    throw new Error('Invalid platform');
  }
  
  // åˆæœŸåŒ–
  await Purchases.configure({ apiKey, appUserID: userId });
  
  // ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°æœ‰åŠ¹åŒ–(é–‹ç™ºæ™‚ã®ã¿)
  if (__DEV__) {
    Purchases.setLogLevel(Purchases.LOG_LEVEL.DEBUG);
  }
};

/**
 * ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³æƒ…å ±å–å¾—
 */
export const getSubscriptionInfo = async () => {
  const customerInfo = await Purchases.getCustomerInfo();
  
  return {
    isPremium: customerInfo.entitlements.active['premium'] !== undefined,
    expirationDate: customerInfo.entitlements.active['premium']?.expirationDate,
    isInTrialPeriod: customerInfo.entitlements.active['premium']?.isInTrialPeriod ?? false,
  };
};

/**
 * å•†å“è³¼å…¥
 */
export const purchaseProduct = async (productId: string) => {
  try {
    const { customerInfo } = await Purchases.purchaseProduct(productId);
    return customerInfo;
  } catch (error) {
    if (error.userCancelled) {
      console.log('User cancelled purchase');
    }
    throw error;
  }
};

/**
 * è³¼å…¥å¾©å…ƒ
 */
export const restorePurchases = async () => {
  const customerInfo = await Purchases.restorePurchases();
  return customerInfo;
};
```

**å®Œäº†æ¡ä»¶**:
- [ ] RevenueCat SDKçµ±åˆ
- [ ] åˆæœŸåŒ–ç¢ºèª
- [ ] ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³çŠ¶æ…‹å–å¾—ç¢ºèª

---

**REV-002è©³ç´°: ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¨­å®š(iOS)**

App Store Connectã§ã®è¨­å®š:
1. ã‚¢ãƒ—ãƒªå†…èª²é‡‘ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä½œæˆ
   - ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆID: `premium_monthly`
   - ã‚¿ã‚¤ãƒ—: è‡ªå‹•æ›´æ–°ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³
   - ä¾¡æ ¼: Â¥500/æœˆ
   - ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«: 7æ—¥é–“

2. RevenueCat Consoleã§ã®è¨­å®š:
   - Offeringsä½œæˆ: `default`
   - Packageè¿½åŠ : `monthly` â†’ `premium_monthly`

**å®Œäº†æ¡ä»¶**:
- [ ] App Store Connectãƒ—ãƒ­ãƒ€ã‚¯ãƒˆä½œæˆ
- [ ] RevenueCatè¨­å®šå®Œäº†
- [ ] ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ãƒ†ã‚¹ãƒˆç¢ºèª

---

**REV-004è©³ç´°: ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³UI**

```typescript
// src/screens/subscription/SubscriptionScreen.tsx
import React, { useState, useEffect } from 'react';
import { View, Text, TouchableOpacity, ActivityIndicator } from 'react-native';
import Purchases, { PurchasesPackage } from 'react-native-purchases';

export default function SubscriptionScreen() {
  const [packages, setPackages] = useState<PurchasesPackage[]>([]);
  const [isLoading, setIsLoading] = useState(false);
  
  useEffect(() => {
    loadOfferings();
  }, []);
  
  const loadOfferings = async () => {
    try {
      const offerings = await Purchases.getOfferings();
      if (offerings.current !== null) {
        setPackages(offerings.current.availablePackages);
      }
    } catch (error) {
      console.error('Failed to load offerings:', error);
    }
  };
  
  const handlePurchase = async (pkg: PurchasesPackage) => {
    setIsLoading(true);
    try {
      const { customerInfo } = await Purchases.purchasePackage(pkg);
      
      if (customerInfo.entitlements.active['premium']) {
        // ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³æœ‰åŠ¹åŒ–
        console.log('Premium activated!');
      }
    } catch (error) {
      console.error('Purchase failed:', error);
    } finally {
      setIsLoading(false);
    }
  };
  
  return (
    <View style={{ flex: 1, padding: 20 }}>
      <Text style={{ fontSize: 24, fontWeight: 'bold', marginBottom: 20 }}>
        ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³
      </Text>
      
      {packages.map((pkg) => (
        <View key={pkg.identifier} style={{ marginBottom: 20 }}>
          <Text style={{ fontSize: 18 }}>
            {pkg.product.title}
          </Text>
          <Text style={{ fontSize: 14, color: '#666', marginVertical: 8 }}>
            {pkg.product.description}
          </Text>
          <Text style={{ fontSize: 16, fontWeight: '600' }}>
            {pkg.product.priceString}/æœˆ
          </Text>
          
          <TouchableOpacity
            style={{
              backgroundColor: '#007AFF',
              padding: 16,
              borderRadius: 8,
              marginTop: 12,
            }}
            onPress={() => handlePurchase(pkg)}
            disabled={isLoading}
          >
            {isLoading ? (
              <ActivityIndicator color="#fff" />
            ) : (
              <Text style={{ color: '#fff', textAlign: 'center', fontSize: 16 }}>
                7æ—¥é–“ç„¡æ–™ã§è©¦ã™
              </Text>
            )}
          </TouchableOpacity>
        </View>
      ))}
      
      <Text style={{ fontSize: 12, color: '#999', marginTop: 20 }}>
        ãƒ»ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«æœŸé–“çµ‚äº†å¾Œã€è‡ªå‹•çš„ã«æœˆé¡Â¥500ãŒèª²é‡‘ã•ã‚Œã¾ã™{'\n'}
        ãƒ»ã„ã¤ã§ã‚‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«å¯èƒ½ã§ã™
      </Text>
    </View>
  );
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ç”»é¢UIå®Ÿè£…
- [ ] è³¼å…¥ãƒ•ãƒ­ãƒ¼å‹•ä½œç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

---

### 8.2 GDPRå¯¾å¿œ

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **GDPR-001** | åŒæ„å–å¾—UI | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | AUTH-001 | åˆ©ç”¨è¦ç´„ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼è¡¨ç¤º |
| **GDPR-002** | åŒæ„è¨˜éŒ²æ©Ÿèƒ½ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | GDPR-001 | Firestoreã«åŒæ„ãƒ­ã‚°ä¿å­˜ |
| **GDPR-003** | ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆAPI | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 3æ—¥ | é«˜ | DATA-001 | GDPRç¬¬15æ¡æº–æ‹  |
| **GDPR-004** | ãƒ‡ãƒ¼ã‚¿å‰Šé™¤API | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 3æ—¥ | é«˜ | DATA-001 | GDPRç¬¬17æ¡æº–æ‹  |
| **GDPR-005** | è¨­å®šç”»é¢GDPRæ©Ÿèƒ½ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | GDPR-003,004 | ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»å‰Šé™¤UI |
| **GDPR-006** | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå‰Šé™¤æ©Ÿèƒ½ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 2æ—¥ | é«˜ | GDPR-004 | å®Œå…¨å‰Šé™¤ç¢ºèª |

**GDPR-003è©³ç´°: ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆAPI**

```typescript
// functions/src/gdpr/exportUserData.ts
import * as functions from 'firebase-functions';
import * as admin from 'firebase-admin';
import { Storage } from '@google-cloud/storage';

/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
 * (ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼v3.1ç¬¬9.1æ¡ã€APIè¨­è¨ˆæ›¸v3.1ç¬¬3.9ç¯€æº–æ‹ )
 */
export const exportUserData = functions
  .region('asia-northeast1')
  .https.onCall(async (data, context) => {
    // èªè¨¼ãƒã‚§ãƒƒã‚¯
    if (!context.auth) {
      throw new functions.https.HttpsError(
        'unauthenticated',
        'User must be authenticated'
      );
    }
    
    const userId = context.auth.uid;
    const firestore = admin.firestore();
    const storage = new Storage();
    
    try {
      // 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿åé›†
      const userData = await collectUserData(userId, firestore);
      
      // 2. JSONç”Ÿæˆ
      const jsonData = JSON.stringify(userData, null, 2);
      
      // 3. Cloud Storageã«ä¿å­˜
      const bucket = storage.bucket('ai-fitness-app-exports');
      const fileName = `user-data-${userId}-${Date.now()}.json`;
      const file = bucket.file(fileName);
      
      await file.save(jsonData, {
        contentType: 'application/json',
        metadata: {
          userId: userId,
          exportedAt: new Date().toISOString(),
        },
      });
      
      // 4. ç½²åä»˜ãURLç”Ÿæˆ(7æ—¥é–“æœ‰åŠ¹)
      const [url] = await file.getSignedUrl({
        action: 'read',
        expires: Date.now() + 7 * 24 * 60 * 60 * 1000, // 7æ—¥å¾Œ
      });
      
      // 5. ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ­ã‚°è¨˜éŒ²
      await firestore.collection('export_logs').add({
        userId: userId,
        exportedAt: admin.firestore.FieldValue.serverTimestamp(),
        fileSize: Buffer.byteLength(jsonData),
        status: 'completed',
      });
      
      return {
        success: true,
        downloadUrl: url,
        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(),
      };
    } catch (error) {
      console.error('Export failed:', error);
      throw new functions.https.HttpsError('internal', 'Export failed');
    }
  });

/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿åé›†
 */
async function collectUserData(userId: string, firestore: FirebaseFirestore.Firestore) {
  const data: any = {
    exportedAt: new Date().toISOString(),
    userId: userId,
  };
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
  const userDoc = await firestore.collection('users').doc(userId).get();
  data.profile = userDoc.data();
  
  // ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³
  const sessionsSnapshot = await firestore
    .collection('training_sessions')
    .where('userId', '==', userId)
    .get();
  data.trainingSessions = sessionsSnapshot.docs.map(doc => doc.data());
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š
  const prefsDoc = await firestore.collection('user_preferences').doc(userId).get();
  data.preferences = prefsDoc.data();
  
  // åŒæ„ãƒ­ã‚°
  const consentSnapshot = await firestore
    .collection('consent_logs')
    .where('userId', '==', userId)
    .get();
  data.consents = consentSnapshot.docs.map(doc => doc.data());
  
  return data;
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆAPIå®Ÿè£…
- [ ] JSONå½¢å¼ã§ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ç¢ºèª
- [ ] ç½²åä»˜ãURLç”Ÿæˆç¢ºèª
- [ ] ãƒ­ã‚°è¨˜éŒ²ç¢ºèª

---

**GDPR-004è©³ç´°: ãƒ‡ãƒ¼ã‚¿å‰Šé™¤API**

```typescript
// functions/src/gdpr/deleteUserData.ts
import * as functions from 'firebase-functions';
import * as admin from 'firebase-admin';

/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿å®Œå…¨å‰Šé™¤
 * (ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼v3.1ç¬¬9.2æ¡ã€APIè¨­è¨ˆæ›¸v3.1ç¬¬3.10ç¯€æº–æ‹ )
 */
export const deleteUserData = functions
  .region('asia-northeast1')
  .https.onCall(async (data, context) => {
    // èªè¨¼ãƒã‚§ãƒƒã‚¯
    if (!context.auth) {
      throw new functions.https.HttpsError(
        'unauthenticated',
        'User must be authenticated'
      );
    }
    
    const userId = context.auth.uid;
    const firestore = admin.firestore();
    
    try {
      // 1. å‰Šé™¤ãƒ­ã‚°è¨˜éŒ²(å‰Šé™¤å‰)
      await firestore.collection('deletion_logs').add({
        userId: userId,
        requestedAt: admin.firestore.FieldValue.serverTimestamp(),
        status: 'started',
      });
      
      // 2. Firestoreãƒ‡ãƒ¼ã‚¿å‰Šé™¤
      await deleteFirestoreData(userId, firestore);
      
      // 3. Firebase Authenticationãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤
      await admin.auth().deleteUser(userId);
      
      // 4. BigQueryãƒ‡ãƒ¼ã‚¿å‰Šé™¤(ä»®ååŒ–ã•ã‚Œã¦ã„ã‚‹ãŸã‚åˆ¥é€”å‡¦ç†)
      // Cloud Functionsã‹ã‚‰ç›´æ¥å‰Šé™¤ã›ãšã€ãƒãƒƒãƒã‚¸ãƒ§ãƒ–ã§å‰Šé™¤
      await markUserForBigQueryDeletion(userId, firestore);
      
      return {
        success: true,
        message: 'ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸ',
      };
    } catch (error) {
      console.error('Deletion failed:', error);
      throw new functions.https.HttpsError('internal', 'Deletion failed');
    }
  });

/**
 * Firestoreãƒ‡ãƒ¼ã‚¿å‰Šé™¤
 */
async function deleteFirestoreData(
  userId: string,
  firestore: FirebaseFirestore.Firestore
) {
  const batch = firestore.batch();
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  batch.delete(firestore.collection('users').doc(userId));
  
  // ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³
  const sessions = await firestore
    .collection('training_sessions')
    .where('userId', '==', userId)
    .get();
  sessions.docs.forEach(doc => batch.delete(doc.ref));
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š
  batch.delete(firestore.collection('user_preferences').doc(userId));
  
  // åŒæ„ãƒ­ã‚°
  const consents = await firestore
    .collection('consent_logs')
    .where('userId', '==', userId)
    .get();
  consents.docs.forEach(doc => batch.delete(doc.ref));
  
  // ãƒãƒƒãƒã‚³ãƒŸãƒƒãƒˆ
  await batch.commit();
}

/**
 * BigQueryå‰Šé™¤ãƒãƒ¼ã‚¯
 */
async function markUserForBigQueryDeletion(
  userId: string,
  firestore: FirebaseFirestore.Firestore
) {
  await firestore.collection('bigquery_deletion_queue').add({
    userId: userId,
    createdAt: admin.firestore.FieldValue.serverTimestamp(),
    status: 'pending',
  });
}
```

**å®Œäº†æ¡ä»¶**:
- [ ] ãƒ‡ãƒ¼ã‚¿å‰Šé™¤APIå®Ÿè£…
- [ ] Firestoreå®Œå…¨å‰Šé™¤ç¢ºèª
- [ ] Firebase Authå‰Šé™¤ç¢ºèª
- [ ] BigQueryå‰Šé™¤ã‚­ãƒ¥ãƒ¼ç¢ºèª

---

### 8.3 ãƒ†ã‚¹ãƒˆãƒ»å“è³ªä¿è¨¼

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **TEST-001** | å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£… | å…¨å“¡ | 5æ—¥ | é«˜ | - | ã‚«ãƒãƒ¬ãƒƒã‚¸70%ä»¥ä¸Š |
| **TEST-002** | çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè£… | å…¨å“¡ | 3æ—¥ | é«˜ | TEST-001 | ä¸»è¦ãƒ•ãƒ­ãƒ¼å…¨ãƒ†ã‚¹ãƒˆ |
| **TEST-003** | E2Eãƒ†ã‚¹ãƒˆå®Ÿè£… | QA | 3æ—¥ | ä¸­ | TEST-002 | Detoxå°å…¥ãƒ»å®Ÿè¡Œ |
| **TEST-004** | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ | QA | 2æ—¥ | ä¸­ | EX-005 | NFR-001æº–æ‹ ç¢ºèª |
| **TEST-005** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ | å¤–éƒ¨ | 3æ—¥ | é«˜ | GDPR-006 | è„†å¼±æ€§è¨ºæ–­ |
| **TEST-006** | ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ | QA | 3æ—¥ | ä¸­ | EX-005 | 10åã§ã®ãƒ†ã‚¹ãƒˆ |
| **TEST-007** | ãƒã‚°ä¿®æ­£ | å…¨å“¡ | 5æ—¥ | é«˜ | TEST-001-006 | Critical/Highå…¨ä¿®æ­£ |

**TEST-001è©³ç´°: å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£…**

```typescript
// __tests__/services/ml/angleCalculator.test.ts
import { calculateAngle, calculateSquatAngles } from '@services/ml/angleCalculator';
import { PoseLandmark, Landmark } from '@services/ml/poseLandmarks';

describe('angleCalculator', () => {
  describe('calculateAngle', () => {
    it('should calculate 90 degree angle correctly', () => {
      const a: Landmark = { x: 0, y: 0, z: 0, visibility: 1 };
      const b: Landmark = { x: 1, y: 0, z: 0, visibility: 1 };
      const c: Landmark = { x: 1, y: 1, z: 0, visibility: 1 };
      
      const angle = calculateAngle(a, b, c);
      expect(angle).toBeCloseTo(90, 1);
    });
    
    it('should calculate 180 degree angle correctly', () => {
      const a: Landmark = { x: 0, y: 0, z: 0, visibility: 1 };
      const b: Landmark = { x: 1, y: 0, z: 0, visibility: 1 };
      const c: Landmark = { x: 2, y: 0, z: 0, visibility: 1 };
      
      const angle = calculateAngle(a, b, c);
      expect(angle).toBeCloseTo(180, 1);
    });
  });
  
  describe('calculateSquatAngles', () => {
    it('should calculate squat angles from landmarks', () => {
      const landmarks: Landmark[] = Array(33).fill({
        x: 0,
        y: 0,
        z: 0,
        visibility: 1,
      });
      
      // ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆå§¿å‹¢ã®ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯ã‚’è¨­å®š
      // ... (çœç•¥)
      
      const angles = calculateSquatAngles(landmarks);
      
      expect(angles.kneeAngle).toBeGreaterThan(0);
      expect(angles.hipAngle).toBeGreaterThan(0);
      expect(angles.backAngle).toBeGreaterThan(0);
    });
  });
});
```

**ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™**:
- å…¨ä½“: 70%ä»¥ä¸Š
- ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯: 80%ä»¥ä¸Š
- UI: 50%ä»¥ä¸Š

**å®Œäº†æ¡ä»¶**:
- [ ] ä¸»è¦ãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆå®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸70%é”æˆ
- [ ] CI/CDã§ã®è‡ªå‹•å®Ÿè¡Œè¨­å®š

---

### 8.4 ãƒªãƒªãƒ¼ã‚¹æº–å‚™

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **REL-001** | App Storeç”³è«‹æº–å‚™ | PM | 3æ—¥ | é«˜ | TEST-007 | ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆç­‰æº–å‚™ |
| **REL-002** | Google Playç”³è«‹æº–å‚™ | PM | 3æ—¥ | é«˜ | TEST-007 | ã‚¹ãƒˆã‚¢ãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°ä½œæˆ |
| **REL-003** | TestFlightãƒ™ãƒ¼ã‚¿é…ä¿¡ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | 1æ—¥ | é«˜ | REL-001 | ãƒ†ã‚¹ã‚¿ãƒ¼æ‹›å¾… |
| **REL-004** | ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰Î²ãƒ†ã‚¹ãƒˆ | QA | 7æ—¥ | é«˜ | REL-003 | 30åã§ã®ãƒ†ã‚¹ãƒˆ |
| **REL-005** | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åæ˜  | å…¨å“¡ | 3æ—¥ | é«˜ | REL-004 | ä¸»è¦å•é¡Œä¿®æ­£ |
| **REL-006** | App Storeå¯©æŸ»æå‡º | PM | 1æ—¥ | é«˜ | REL-005 | å¯©æŸ»æå‡º |
| **REL-007** | Google Playå¯©æŸ»æå‡º | PM | 1æ—¥ | é«˜ | REL-005 | å¯©æŸ»æå‡º |

**å®Œäº†æ¡ä»¶(MVPãƒªãƒªãƒ¼ã‚¹)**:
- [ ] iOS App Storeå…¬é–‹
- [ ] Android Google Playå…¬é–‹
- [ ] ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ
- [ ] ãƒ—ãƒ¬ã‚¹ãƒªãƒªãƒ¼ã‚¹é…ä¿¡

---

## 9. Phase 3: MLæº–å‚™ãƒ»æ©Ÿèƒ½æ‹¡å¼µ

**æœŸé–“**: Month 5-8  
**ç›®æ¨™**: 10,000ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãƒ‡ãƒ¼ã‚¿åé›†ã¨MLãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ§‹ç¯‰

### 9.1 ãƒ‡ãƒ¼ã‚¿åé›†

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **DC-001** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç²å¾—æ–½ç­– | PM | ç¶™ç¶š | é«˜ | REL-006,007 | æœˆé–“100åç²å¾— |
| **DC-002** | ãƒ‡ãƒ¼ã‚¿åé›†ç›£è¦– | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | ç¶™ç¶š | é«˜ | DATA-003 | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç¢ºèª |
| **DC-003** | 10,000ã‚»ãƒƒã‚·ãƒ§ãƒ³é”æˆ | - | Month 6 | é«˜ | DC-001,002 | BigQueryã§ç¢ºèª |

### 9.2 MLãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ§‹ç¯‰

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **ML-DS-001** | ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚° | ML | 5æ—¥ | é«˜ | DC-003 | ç•°å¸¸å€¤é™¤å»ã€æ­£è¦åŒ– |
| **ML-DS-002** | ãƒ©ãƒ™ãƒ«ä»˜ã‘ãƒ«ãƒ¼ãƒ«ç­–å®š | ML | 3æ—¥ | é«˜ | ML-DS-001 | è‰¯å¥½/ä¸è‰¯ã®åŸºæº–å®šç¾© |
| **ML-DS-003** | ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåˆ†å‰² | ML | 2æ—¥ | é«˜ | ML-DS-002 | Train/Val/Teståˆ†å‰² |
| **ML-DS-004** | ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚° | ML | 5æ—¥ | é«˜ | ML-DS-003 | è§’åº¦ãƒ»é€Ÿåº¦ç­‰ã®ç‰¹å¾´é‡ |

**å®Œäº†æ¡ä»¶**:
- [ ] 10,000ã‚»ãƒƒã‚·ãƒ§ãƒ³ä»¥ä¸Šã®ãƒ‡ãƒ¼ã‚¿åé›†
- [ ] ã‚¯ãƒ¬ãƒ³ã‚¸ãƒ³ã‚°æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ
- [ ] Train/Val/Teståˆ†å‰²å®Œäº†
- [ ] ç‰¹å¾´é‡å®šç¾©å®Œäº†

---

## 10. Phase 4: MLå®Ÿè£…ãƒ»ã‚¹ã‚±ãƒ¼ãƒ«

**æœŸé–“**: Month 9-12  
**ç›®æ¨™**: MLãƒ¢ãƒ‡ãƒ«ã®è¨“ç·´ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„

### 10.1 MLãƒ¢ãƒ‡ãƒ«é–‹ç™º

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **ML-MOD-001** | ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³å®Ÿè£… | ML | 5æ—¥ | é«˜ | ML-DS-004 | å˜ç´”ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ |
| **ML-MOD-002** | LSTMå®Ÿè£… | ML | 10æ—¥ | é«˜ | ML-MOD-001 | æ™‚ç³»åˆ—ãƒ¢ãƒ‡ãƒ«è¨“ç·´ |
| **ML-MOD-003** | Transformerå®Ÿè£… | ML | 10æ—¥ | ä¸­ | ML-MOD-002 | Attentionæ©Ÿæ§‹ |
| **ML-MOD-004** | ãƒ¢ãƒ‡ãƒ«è©•ä¾¡ | ML | 5æ—¥ | é«˜ | ML-MOD-002,003 | ç²¾åº¦80%ä»¥ä¸Š |
| **ML-MOD-005** | ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ | ML | 5æ—¥ | ä¸­ | ML-MOD-004 | Grid Search |

### 10.2 MLãƒ¢ãƒ‡ãƒ«ãƒ‡ãƒ—ãƒ­ã‚¤

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | å·¥æ•° | å„ªå…ˆåº¦ | ä¾å­˜ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|-------|------|---------|
| **ML-DEP-001** | Vertex AIè¨­å®š | ML | 3æ—¥ | é«˜ | ML-MOD-004 | ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½œæˆ |
| **ML-DEP-002** | ãƒ¢ãƒ‡ãƒ«ãƒ‡ãƒ—ãƒ­ã‚¤ | ML | 2æ—¥ | é«˜ | ML-DEP-001 | æ¨è«–APIç¢ºèª |
| **ML-DEP-003** | ã‚¢ãƒ—ãƒªçµ±åˆ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ | 5æ—¥ | é«˜ | ML-DEP-002 | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¨è«– |
| **ML-DEP-004** | A/Bãƒ†ã‚¹ãƒˆå®Ÿæ–½ | PM | 10æ—¥ | é«˜ | ML-DEP-003 | ãƒ«ãƒ¼ãƒ«vs MLæ¯”è¼ƒ |
| **ML-DEP-005** | æœ¬ç•ªåˆ‡ã‚Šæ›¿ãˆ | ML | 2æ—¥ | é«˜ | ML-DEP-004 | MLãƒ¢ãƒ‡ãƒ«æœ‰åŠ¹åŒ– |

**å®Œäº†æ¡ä»¶**:
- [ ] MLãƒ¢ãƒ‡ãƒ«ç²¾åº¦80%ä»¥ä¸Š
- [ ] Vertex AIãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†
- [ ] ã‚¢ãƒ—ãƒªã§ã®æ¨è«–å‹•ä½œç¢ºèª
- [ ] A/Bãƒ†ã‚¹ãƒˆçµæœè‰¯å¥½

---

## 11. é‹ç”¨ãƒ»ä¿å®ˆã‚¿ã‚¹ã‚¯

### 11.1 æ—¥å¸¸é‹ç”¨ã‚¿ã‚¹ã‚¯

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | é »åº¦ | æ‰€è¦æ™‚é–“ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|---------|---------|
| **OPS-001** | ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ç¢ºèª | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | æ—¥æ¬¡ | 30åˆ† | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç¢ºèª |
| **OPS-002** | ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | æ—¥æ¬¡ | 30åˆ† | Crashlyticsãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| **OPS-003** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆå¯¾å¿œ | CS | éšæ™‚ | - | 24æ™‚é–“ä»¥å†…è¿”ä¿¡ |
| **OPS-004** | ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç¢ºèª | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | é€±æ¬¡ | 1æ™‚é–“ | Firestoreè‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— |
| **OPS-005** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒé©ç”¨ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | æœˆæ¬¡ | 2æ™‚é–“ | ä¾å­˜é–¢ä¿‚æ›´æ–° |
| **OPS-006** | ã‚³ã‚¹ãƒˆåˆ†æ | PM | æœˆæ¬¡ | 2æ™‚é–“ | äºˆç®—å†…ç¢ºèª |

### 11.2 å®šæœŸä¿å®ˆã‚¿ã‚¹ã‚¯

| ã‚¿ã‚¹ã‚¯ID | ã‚¿ã‚¹ã‚¯å | æ‹…å½“ | é »åº¦ | æ‰€è¦æ™‚é–“ | å®Œäº†æ¡ä»¶ |
|---------|---------|------|------|---------|---------|
| **MAINT-001** | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ– | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | æœˆæ¬¡ | 3æ™‚é–“ | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ– |
| **MAINT-002** | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ | å…¨å“¡ | æœˆæ¬¡ | 5æ™‚é–“ | NFR-001ç¢ºèª |
| **MAINT-003** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ» | å¤–éƒ¨ | å››åŠæœŸ | - | è„†å¼±æ€§è¨ºæ–­ |
| **MAINT-004** | GDPRç›£æŸ» | æ³•å‹™ | å››åŠæœŸ | 3æ™‚é–“ | ROPAãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| **MAINT-005** | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° | PM | æœˆæ¬¡ | 2æ™‚é–“ | æœ€æ–°çŠ¶æ…‹ç¶­æŒ |

---

## 12. ãƒªã‚¹ã‚¯ç®¡ç†ãƒ»å“è³ªä¿è¨¼

### 12.1 ãƒªã‚¹ã‚¯ç®¡ç†è¡¨

| ãƒªã‚¹ã‚¯ID | ãƒªã‚¹ã‚¯å†…å®¹ | å½±éŸ¿åº¦ | ç™ºç”Ÿç¢ºç‡ | å¯¾ç­– | æ‹…å½“ |
|---------|----------|-------|---------|------|------|
| **R-001** | MediaPipeç²¾åº¦ä¸è¶³ | é«˜ | ä¸­ | é–¾å€¤èª¿æ•´ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹å¼·åŒ– | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ |
| **R-002** | Firebaseç„¡æ–™æ è¶…é | ä¸­ | ä½ | ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã€èª²é‡‘ä¸Šé™è¨­å®š | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ |
| **R-003** | App Storeå¯©æŸ»è½ã¡ | é«˜ | ä¸­ | äº‹å‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³å³å®ˆ | PM |
| **R-004** | GDPRé•åæŒ‡æ‘˜ | é«˜ | ä½ | æ³•å‹™ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€å¤–éƒ¨ç›£æŸ» | æ³•å‹™ |
| **R-005** | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ | ä¸­ | ä¸­ | æœ€é©åŒ–ã€ãƒ‡ãƒã‚¤ã‚¹åˆ¶é™ | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ |
| **R-006** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ | é«˜ | ä½ | å®šæœŸè¨ºæ–­ã€ãƒ‘ãƒƒãƒé©ç”¨ | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ |
| **R-007** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç²å¾—ä¸è¶³ | ä¸­ | ä¸­ | ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°å¼·åŒ–ã€ç´¹ä»‹æ©Ÿèƒ½ | PM |
| **R-008** | åŒ»ç™‚æ©Ÿå™¨èª¤èª | é«˜ | ä½ | å…è²¬æ˜è¨˜ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•™è‚² | PM+æ³•å‹™ |

### 12.2 å“è³ªä¿è¨¼åŸºæº–

#### 12.2.1 ã‚³ãƒ¼ãƒ‰å“è³ª

| é …ç›® | åŸºæº– | ç¢ºèªæ–¹æ³• |
|-----|------|---------|
| **ESLintã‚¨ãƒ©ãƒ¼** | 0ä»¶ | CI/CD |
| **TypeScriptã‚¨ãƒ©ãƒ¼** | 0ä»¶ | CI/CD |
| **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸** | 70%ä»¥ä¸Š | Jest |
| **é‡è¤‡ã‚³ãƒ¼ãƒ‰** | 5%ä»¥ä¸‹ | SonarQube |
| **ã‚³ãƒ¼ãƒ‰è¤‡é›‘åº¦** | 10ä»¥ä¸‹ | SonarQube |

#### 12.2.2 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

| é …ç›® | åŸºæº– | ç¢ºèªæ–¹æ³• |
|-----|------|---------|
| **ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚é–“** | 3ç§’ä»¥å†… | å®Ÿæ©Ÿæ¸¬å®š |
| **éª¨æ ¼æ¤œå‡ºFPS** | 30fpsä»¥ä¸Š | Profiler |
| **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡** | 250MBä»¥ä¸‹ | Profiler |
| **APIãƒ¬ã‚¹ãƒãƒ³ã‚¹** | 1ç§’ä»¥å†… | Firebase Console |
| **ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ•ãƒªãƒ¼ç‡** | 99%ä»¥ä¸Š | Crashlytics |

#### 12.2.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

| é …ç›® | åŸºæº– | ç¢ºèªæ–¹æ³• |
|-----|------|---------|
| **èªè¨¼å¿…é ˆ** | å…¨API | ãƒ¬ãƒ“ãƒ¥ãƒ¼ |
| **HTTPS** | å…¨é€šä¿¡ | Networkç›£è¦– |
| **ãƒ‡ãƒ¼ã‚¿æš—å·åŒ–** | AES-256 | Firebaseè¨­å®š |
| **è„†å¼±æ€§** | Critical 0ä»¶ | å¤–éƒ¨è¨ºæ–­ |

---

## ã¾ã¨ã‚

### æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æˆæœ

âœ… **å®Œå…¨ãªé–‹ç™ºè¨ˆç”»**:
- Phase 1-4ã®è©³ç´°ã‚¿ã‚¹ã‚¯å®šç¾©(200+ã‚¿ã‚¹ã‚¯)
- æ˜ç¢ºãªå®Œäº†æ¡ä»¶ã¨å·¥æ•°è¦‹ç©
- ä¾å­˜é–¢ä¿‚ã®å¯è¦–åŒ–

âœ… **å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã®æ•´åˆæ€§**:
- è¦ä»¶å®šç¾©æ›¸v3.1ã®å…¨31æ©Ÿèƒ½è¦ä»¶ã«å¯¾å¿œ
- æ³•çš„è¦ä»¶(åˆ©ç”¨è¦ç´„ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼)ã®å®Ÿè£…
- æŠ€è¡“è¨­è¨ˆ(Firestoreãƒ»BigQueryãƒ»API)ã®å…·ä½“åŒ–

âœ… **ç¾å®Ÿçš„ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**:
- MVP: 4ãƒ¶æœˆ(Phase 1-2)
- æˆé•·æœŸ: 4ãƒ¶æœˆ(Phase 3)
- MLå®Ÿè£…: 4ãƒ¶æœˆ(Phase 4)
- åˆè¨ˆ: 12ãƒ¶æœˆ

âœ… **ãƒªã‚¹ã‚¯ç®¡ç†**:
- 8ã¤ã®ä¸»è¦ãƒªã‚¹ã‚¯ç‰¹å®š
- å¯¾ç­–ã®æ˜ç¢ºåŒ–
- å“è³ªä¿è¨¼åŸºæº–ã®è¨­å®š

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. **é–‹ç™ºé–‹å§‹æº–å‚™**:
   - é–‹ç™ºç’°å¢ƒæ§‹ç¯‰(ENV-001ã€œ005)
   - Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ(FIRE-001ã€œ007)
   - ãƒãƒ¼ãƒ ä½“åˆ¶ç¢ºç«‹

2. **Phase 1å®Ÿè¡Œ**:
   - Week 1-2: ç’°å¢ƒæ§‹ç¯‰ãƒ»åŸºç›¤æ§‹ç¯‰
   - Week 3-4: èªè¨¼ãƒ»MediaPipeçµ±åˆãƒ»ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆå®Ÿè£…

3. **ç¶™ç¶šçš„æ”¹å–„**:
   - ã‚¹ãƒ—ãƒªãƒ³ãƒˆãƒ¬ãƒ“ãƒ¥ãƒ¼(2é€±é–“ã”ã¨)
   - KPIç¢ºèª(æœˆæ¬¡)
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°(éšæ™‚)

### é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | é–¢é€£ç®‡æ‰€ |
|------------|----------|---------|
| **è¦ä»¶å®šç¾©æ›¸** | v3.1 | å…¨ä½“ |
| **ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸** | v3.1 | å…¨ä½“ |
| **Firestoreãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆæ›¸** | v3.1 | ç¬¬3-4ç«  |
| **BigQueryè¨­è¨ˆæ›¸** | v3.1 | ç¬¬3-4ç«  |
| **APIè¨­è¨ˆæ›¸(Firebase Functions)** | v3.1 | ç¬¬3-6ç«  |
| **5ç¨®ç›®ãƒ•ã‚©ãƒ¼ãƒ ç¢ºèªãƒ­ã‚¸ãƒƒã‚¯è©³ç´°** | v3.1 | å…¨ä½“ |
| **åˆ©ç”¨è¦ç´„** | v3.1 | å…¨ä½“ |
| **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼** | v3.1 | å…¨ä½“ |

---

**End of Document**
